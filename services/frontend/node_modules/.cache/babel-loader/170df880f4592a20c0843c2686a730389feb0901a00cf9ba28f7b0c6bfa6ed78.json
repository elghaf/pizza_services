{"ast":null,"code":"var _s = $RefreshSig$();\n/**\n * useViolationDetection - Custom hook for violation detection logic\n * Manages violation state, analysis, and notifications\n */\n\nimport { useState, useRef, useCallback } from 'react';\nimport { toast } from 'react-toastify';\nimport { analyzeViolations, getViolationStats } from '../utils/ViolationAnalysis';\nimport databaseClient from '../../../utils/DatabaseClient';\nimport { violationTypes } from '../ViolationTypes';\nexport const useViolationDetection = () => {\n  _s();\n  // Violation state\n  const [violations, setViolations] = useState([]);\n  const [violationHistory, setViolationHistory] = useState([]);\n  const [settings, setSettings] = useState({\n    enabled: true,\n    sensitivity: 0.7,\n    // Confidence threshold for violations\n    temporalWindow: 3,\n    // Seconds to track violations\n    movementThreshold: 20 // Pixels of movement to consider \"handling\"\n  });\n\n  // Database session tracking\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [currentFrameNumber, setCurrentFrameNumber] = useState(0);\n\n  // Hand tracking reference\n  const handTrackingRef = useRef(new Map());\n\n  /**\n   * Process detections and analyze for violations\n   * @param {Array} detections - Current frame detections\n   * @param {Array} zones - ROI zones configuration\n   * @param {Function} onViolationDetected - Callback for new violations\n   */\n  const processDetections = useCallback((detections, zones, onViolationDetected) => {\n    console.log('🚨 ViolationDetection processDetections:', {\n      enabled: settings.enabled,\n      detections: detections.length,\n      zones: zones.length\n    });\n    if (!settings.enabled || detections.length === 0 || zones.length === 0) {\n      console.log('⏸️ Violation analysis skipped:', {\n        enabled: settings.enabled,\n        hasDetections: detections.length > 0,\n        hasZones: zones.length > 0\n      });\n      setViolations([]);\n      return;\n    }\n    console.log('🔍 Starting violation analysis...');\n    const newViolations = analyzeViolations(detections, zones, settings, handTrackingRef);\n\n    // Update violations\n    if (newViolations.length > 0) {\n      setViolations(newViolations);\n      setViolationHistory(prev => [...prev, ...newViolations].slice(-50)); // Keep last 50\n\n      // Save violations to database\n      if (currentSessionId) {\n        newViolations.forEach(async violation => {\n          try {\n            const violationData = {\n              session_id: currentSessionId,\n              frame_number: currentFrameNumber,\n              violation_type: violation.type,\n              confidence: violation.confidence,\n              severity: violation.severity,\n              description: violation.description,\n              hand_position: violation.handPosition,\n              scooper_present: violation.scooperPresent || false,\n              scooper_distance: violation.scooperDistance,\n              movement_pattern: violation.movementPattern,\n              bounding_boxes: violation.boundingBoxes || [],\n              roi_zone_id: violation.zoneId\n            };\n            await databaseClient.saveViolation(currentSessionId, violationData);\n            console.log('📊 Violation saved to database:', violation.type);\n          } catch (error) {\n            console.error('❌ Failed to save violation to database:', error);\n          }\n        });\n      }\n\n      // Notify parent component and show toasts\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n        showViolationNotification(violation);\n      });\n    } else {\n      setViolations([]);\n    }\n  }, [settings]);\n\n  /**\n   * Show violation notification\n   * @param {object} violation - Violation object\n   */\n  const showViolationNotification = useCallback(violation => {\n    const config = violationTypes[violation.type];\n    const toastOptions = {\n      position: \"top-center\",\n      autoClose: config.severity === 'high' ? 8000 : 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true\n    };\n    if (config.severity === 'high') {\n      toast.error(`${config.icon} ${config.title}`, toastOptions);\n    } else {\n      toast.warning(`${config.icon} ${config.title}`, toastOptions);\n    }\n  }, []);\n\n  /**\n   * Update detection settings\n   * @param {object} newSettings - New settings object\n   */\n  const updateSettings = useCallback(newSettings => {\n    setSettings(prev => ({\n      ...prev,\n      ...newSettings\n    }));\n  }, []);\n\n  /**\n   * Clear all violations\n   */\n  const clearViolations = useCallback(() => {\n    setViolations([]);\n    handTrackingRef.current.clear();\n  }, []);\n\n  /**\n   * Clear violation history\n   */\n  const clearViolationHistory = useCallback(() => {\n    setViolationHistory([]);\n  }, []);\n\n  /**\n   * Acknowledge a violation\n   * @param {string} violationId - Violation ID to acknowledge\n   * @param {string} acknowledgedBy - User who acknowledged the violation\n   */\n  const acknowledgeViolation = useCallback((violationId, acknowledgedBy) => {\n    setViolationHistory(prev => prev.map(violation => violation.id === violationId ? {\n      ...violation,\n      resolved: true,\n      acknowledgedBy,\n      acknowledgedAt: new Date().toISOString()\n    } : violation));\n\n    // Remove from active violations\n    setViolations(prev => prev.filter(v => v.id !== violationId));\n    toast.success('Violation acknowledged and resolved');\n  }, []);\n\n  /**\n   * Get violation statistics\n   * @returns {object} Violation statistics\n   */\n  const getStats = useCallback(() => {\n    const stats = getViolationStats(violationHistory);\n    return {\n      ...stats,\n      current: violations.length\n    };\n  }, [violations, violationHistory]);\n\n  /**\n   * Filter violations by criteria\n   * @param {object} criteria - Filter criteria\n   * @returns {Array} Filtered violations\n   */\n  const filterViolations = useCallback((criteria = {}) => {\n    let filtered = [...violationHistory];\n    if (criteria.severity) {\n      filtered = filtered.filter(v => v.severity === criteria.severity);\n    }\n    if (criteria.type) {\n      filtered = filtered.filter(v => v.type === criteria.type);\n    }\n    if (criteria.timeRange) {\n      const now = Date.now();\n      const timeLimit = now - criteria.timeRange * 1000;\n      filtered = filtered.filter(v => new Date(v.timestamp).getTime() >= timeLimit);\n    }\n    if (criteria.resolved !== undefined) {\n      filtered = filtered.filter(v => v.resolved === criteria.resolved);\n    }\n    return filtered;\n  }, [violationHistory]);\n\n  /**\n   * Export violation data\n   * @param {string} format - Export format ('json' or 'csv')\n   * @param {object} criteria - Filter criteria\n   * @returns {string} Exported data\n   */\n  const exportViolations = useCallback((format = 'json', criteria = {}) => {\n    const filtered = filterViolations(criteria);\n    if (format === 'csv') {\n      const headers = ['ID', 'Type', 'Severity', 'Timestamp', 'Confidence', 'Description', 'Resolved'];\n      const rows = filtered.map(v => [v.id, v.type, v.severity, v.timestamp, v.confidence, v.description, v.resolved]);\n      return [headers, ...rows].map(row => row.join(',')).join('\\n');\n    }\n    return JSON.stringify(filtered, null, 2);\n  }, [filterViolations]);\n\n  /**\n   * Get violation trends over time\n   * @param {number} days - Number of days to analyze (default: 7)\n   * @returns {Array} Trend data\n   */\n  const getViolationTrends = useCallback((days = 7) => {\n    const now = new Date();\n    const trends = [];\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(now);\n      date.setDate(date.getDate() - i);\n      date.setHours(0, 0, 0, 0);\n      const nextDate = new Date(date);\n      nextDate.setDate(nextDate.getDate() + 1);\n      const dayViolations = violationHistory.filter(v => {\n        const vDate = new Date(v.timestamp);\n        return vDate >= date && vDate < nextDate;\n      });\n      trends.push({\n        date: date.toISOString().split('T')[0],\n        total: dayViolations.length,\n        high: dayViolations.filter(v => v.severity === 'high').length,\n        medium: dayViolations.filter(v => v.severity === 'medium').length,\n        low: dayViolations.filter(v => v.severity === 'low').length\n      });\n    }\n    return trends;\n  }, [violationHistory]);\n\n  /**\n   * Reset hand tracking data\n   */\n  const resetHandTracking = useCallback(() => {\n    handTrackingRef.current.clear();\n  }, []);\n\n  /**\n   * Set current session for database tracking\n   */\n  const setSessionTracking = useCallback((sessionId, frameNumber = 0) => {\n    setCurrentSessionId(sessionId);\n    setCurrentFrameNumber(frameNumber);\n    console.log('📊 ViolationDetector session tracking set:', sessionId, frameNumber);\n  }, []);\n\n  /**\n   * Update frame number for database tracking\n   */\n  const updateFrameNumber = useCallback(frameNumber => {\n    setCurrentFrameNumber(frameNumber);\n  }, []);\n  return {\n    // State\n    violations,\n    violationHistory,\n    settings,\n    // Actions\n    processDetections,\n    updateSettings,\n    clearViolations,\n    clearViolationHistory,\n    acknowledgeViolation,\n    resetHandTracking,\n    setSessionTracking,\n    updateFrameNumber,\n    // Computed\n    getStats,\n    filterViolations,\n    exportViolations,\n    getViolationTrends,\n    // Refs\n    handTrackingRef\n  };\n};\n_s(useViolationDetection, \"+0pjgvhxFt0EoactsJjs8qaT/rQ=\");","map":{"version":3,"names":["useState","useRef","useCallback","toast","analyzeViolations","getViolationStats","databaseClient","violationTypes","useViolationDetection","_s","violations","setViolations","violationHistory","setViolationHistory","settings","setSettings","enabled","sensitivity","temporalWindow","movementThreshold","currentSessionId","setCurrentSessionId","currentFrameNumber","setCurrentFrameNumber","handTrackingRef","Map","processDetections","detections","zones","onViolationDetected","console","log","length","hasDetections","hasZones","newViolations","prev","slice","forEach","violation","violationData","session_id","frame_number","violation_type","type","confidence","severity","description","hand_position","handPosition","scooper_present","scooperPresent","scooper_distance","scooperDistance","movement_pattern","movementPattern","bounding_boxes","boundingBoxes","roi_zone_id","zoneId","saveViolation","error","showViolationNotification","config","toastOptions","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","icon","title","warning","updateSettings","newSettings","clearViolations","current","clear","clearViolationHistory","acknowledgeViolation","violationId","acknowledgedBy","map","id","resolved","acknowledgedAt","Date","toISOString","filter","v","success","getStats","stats","filterViolations","criteria","filtered","timeRange","now","timeLimit","timestamp","getTime","undefined","exportViolations","format","headers","rows","row","join","JSON","stringify","getViolationTrends","days","trends","i","date","setDate","getDate","setHours","nextDate","dayViolations","vDate","push","split","total","high","medium","low","resetHandTracking","setSessionTracking","sessionId","frameNumber","updateFrameNumber"],"sources":["C:/Users/ayoub/OneDrive/Desktop/eagleAI/pizza_store_detection/services/frontend/src/components/ViolationDetector/hooks/useViolationDetection.js"],"sourcesContent":["/**\n * useViolationDetection - Custom hook for violation detection logic\n * Manages violation state, analysis, and notifications\n */\n\nimport { useState, useRef, useCallback } from 'react';\nimport { toast } from 'react-toastify';\nimport { analyzeViolations, getViolationStats } from '../utils/ViolationAnalysis';\nimport databaseClient from '../../../utils/DatabaseClient';\nimport { violationTypes } from '../ViolationTypes';\n\nexport const useViolationDetection = () => {\n  // Violation state\n  const [violations, setViolations] = useState([]);\n  const [violationHistory, setViolationHistory] = useState([]);\n  const [settings, setSettings] = useState({\n    enabled: true,\n    sensitivity: 0.7, // Confidence threshold for violations\n    temporalWindow: 3, // Seconds to track violations\n    movementThreshold: 20, // Pixels of movement to consider \"handling\"\n  });\n\n  // Database session tracking\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [currentFrameNumber, setCurrentFrameNumber] = useState(0);\n\n  // Hand tracking reference\n  const handTrackingRef = useRef(new Map());\n\n  /**\n   * Process detections and analyze for violations\n   * @param {Array} detections - Current frame detections\n   * @param {Array} zones - ROI zones configuration\n   * @param {Function} onViolationDetected - Callback for new violations\n   */\n  const processDetections = useCallback((detections, zones, onViolationDetected) => {\n    console.log('🚨 ViolationDetection processDetections:', {\n      enabled: settings.enabled,\n      detections: detections.length,\n      zones: zones.length\n    });\n\n    if (!settings.enabled || detections.length === 0 || zones.length === 0) {\n      console.log('⏸️ Violation analysis skipped:', {\n        enabled: settings.enabled,\n        hasDetections: detections.length > 0,\n        hasZones: zones.length > 0\n      });\n      setViolations([]);\n      return;\n    }\n\n    console.log('🔍 Starting violation analysis...');\n    const newViolations = analyzeViolations(detections, zones, settings, handTrackingRef);\n\n    // Update violations\n    if (newViolations.length > 0) {\n      setViolations(newViolations);\n      setViolationHistory(prev => [...prev, ...newViolations].slice(-50)); // Keep last 50\n\n      // Save violations to database\n      if (currentSessionId) {\n        newViolations.forEach(async (violation) => {\n          try {\n            const violationData = {\n              session_id: currentSessionId,\n              frame_number: currentFrameNumber,\n              violation_type: violation.type,\n              confidence: violation.confidence,\n              severity: violation.severity,\n              description: violation.description,\n              hand_position: violation.handPosition,\n              scooper_present: violation.scooperPresent || false,\n              scooper_distance: violation.scooperDistance,\n              movement_pattern: violation.movementPattern,\n              bounding_boxes: violation.boundingBoxes || [],\n              roi_zone_id: violation.zoneId\n            };\n\n            await databaseClient.saveViolation(currentSessionId, violationData);\n            console.log('📊 Violation saved to database:', violation.type);\n          } catch (error) {\n            console.error('❌ Failed to save violation to database:', error);\n          }\n        });\n      }\n\n      // Notify parent component and show toasts\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n\n        showViolationNotification(violation);\n      });\n    } else {\n      setViolations([]);\n    }\n  }, [settings]);\n\n  /**\n   * Show violation notification\n   * @param {object} violation - Violation object\n   */\n  const showViolationNotification = useCallback((violation) => {\n    const config = violationTypes[violation.type];\n    \n    const toastOptions = {\n      position: \"top-center\",\n      autoClose: config.severity === 'high' ? 8000 : 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n    };\n\n    if (config.severity === 'high') {\n      toast.error(`${config.icon} ${config.title}`, toastOptions);\n    } else {\n      toast.warning(`${config.icon} ${config.title}`, toastOptions);\n    }\n  }, []);\n\n  /**\n   * Update detection settings\n   * @param {object} newSettings - New settings object\n   */\n  const updateSettings = useCallback((newSettings) => {\n    setSettings(prev => ({ ...prev, ...newSettings }));\n  }, []);\n\n  /**\n   * Clear all violations\n   */\n  const clearViolations = useCallback(() => {\n    setViolations([]);\n    handTrackingRef.current.clear();\n  }, []);\n\n  /**\n   * Clear violation history\n   */\n  const clearViolationHistory = useCallback(() => {\n    setViolationHistory([]);\n  }, []);\n\n  /**\n   * Acknowledge a violation\n   * @param {string} violationId - Violation ID to acknowledge\n   * @param {string} acknowledgedBy - User who acknowledged the violation\n   */\n  const acknowledgeViolation = useCallback((violationId, acknowledgedBy) => {\n    setViolationHistory(prev => \n      prev.map(violation => \n        violation.id === violationId \n          ? { \n              ...violation, \n              resolved: true, \n              acknowledgedBy, \n              acknowledgedAt: new Date().toISOString() \n            }\n          : violation\n      )\n    );\n\n    // Remove from active violations\n    setViolations(prev => prev.filter(v => v.id !== violationId));\n    \n    toast.success('Violation acknowledged and resolved');\n  }, []);\n\n  /**\n   * Get violation statistics\n   * @returns {object} Violation statistics\n   */\n  const getStats = useCallback(() => {\n    const stats = getViolationStats(violationHistory);\n    return {\n      ...stats,\n      current: violations.length\n    };\n  }, [violations, violationHistory]);\n\n  /**\n   * Filter violations by criteria\n   * @param {object} criteria - Filter criteria\n   * @returns {Array} Filtered violations\n   */\n  const filterViolations = useCallback((criteria = {}) => {\n    let filtered = [...violationHistory];\n\n    if (criteria.severity) {\n      filtered = filtered.filter(v => v.severity === criteria.severity);\n    }\n\n    if (criteria.type) {\n      filtered = filtered.filter(v => v.type === criteria.type);\n    }\n\n    if (criteria.timeRange) {\n      const now = Date.now();\n      const timeLimit = now - (criteria.timeRange * 1000);\n      filtered = filtered.filter(v => new Date(v.timestamp).getTime() >= timeLimit);\n    }\n\n    if (criteria.resolved !== undefined) {\n      filtered = filtered.filter(v => v.resolved === criteria.resolved);\n    }\n\n    return filtered;\n  }, [violationHistory]);\n\n  /**\n   * Export violation data\n   * @param {string} format - Export format ('json' or 'csv')\n   * @param {object} criteria - Filter criteria\n   * @returns {string} Exported data\n   */\n  const exportViolations = useCallback((format = 'json', criteria = {}) => {\n    const filtered = filterViolations(criteria);\n    \n    if (format === 'csv') {\n      const headers = ['ID', 'Type', 'Severity', 'Timestamp', 'Confidence', 'Description', 'Resolved'];\n      const rows = filtered.map(v => [\n        v.id,\n        v.type,\n        v.severity,\n        v.timestamp,\n        v.confidence,\n        v.description,\n        v.resolved\n      ]);\n      \n      return [headers, ...rows].map(row => row.join(',')).join('\\n');\n    }\n    \n    return JSON.stringify(filtered, null, 2);\n  }, [filterViolations]);\n\n  /**\n   * Get violation trends over time\n   * @param {number} days - Number of days to analyze (default: 7)\n   * @returns {Array} Trend data\n   */\n  const getViolationTrends = useCallback((days = 7) => {\n    const now = new Date();\n    const trends = [];\n\n    for (let i = days - 1; i >= 0; i--) {\n      const date = new Date(now);\n      date.setDate(date.getDate() - i);\n      date.setHours(0, 0, 0, 0);\n      \n      const nextDate = new Date(date);\n      nextDate.setDate(nextDate.getDate() + 1);\n\n      const dayViolations = violationHistory.filter(v => {\n        const vDate = new Date(v.timestamp);\n        return vDate >= date && vDate < nextDate;\n      });\n\n      trends.push({\n        date: date.toISOString().split('T')[0],\n        total: dayViolations.length,\n        high: dayViolations.filter(v => v.severity === 'high').length,\n        medium: dayViolations.filter(v => v.severity === 'medium').length,\n        low: dayViolations.filter(v => v.severity === 'low').length\n      });\n    }\n\n    return trends;\n  }, [violationHistory]);\n\n  /**\n   * Reset hand tracking data\n   */\n  const resetHandTracking = useCallback(() => {\n    handTrackingRef.current.clear();\n  }, []);\n\n  /**\n   * Set current session for database tracking\n   */\n  const setSessionTracking = useCallback((sessionId, frameNumber = 0) => {\n    setCurrentSessionId(sessionId);\n    setCurrentFrameNumber(frameNumber);\n    console.log('📊 ViolationDetector session tracking set:', sessionId, frameNumber);\n  }, []);\n\n  /**\n   * Update frame number for database tracking\n   */\n  const updateFrameNumber = useCallback((frameNumber) => {\n    setCurrentFrameNumber(frameNumber);\n  }, []);\n\n  return {\n    // State\n    violations,\n    violationHistory,\n    settings,\n\n    // Actions\n    processDetections,\n    updateSettings,\n    clearViolations,\n    clearViolationHistory,\n    acknowledgeViolation,\n    resetHandTracking,\n    setSessionTracking,\n    updateFrameNumber,\n\n    // Computed\n    getStats,\n    filterViolations,\n    exportViolations,\n    getViolationTrends,\n\n    // Refs\n    handTrackingRef\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}