{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ayoub\\\\OneDrive\\\\Desktop\\\\eagleAI\\\\pizza_store_detection\\\\services\\\\frontend\\\\src\\\\components\\\\ViolationDetector.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ViolationDetector = ({\n  detections = [],\n  zones = [],\n  frameWidth = 640,\n  frameHeight = 480,\n  onViolationDetected,\n  hideControls = false,\n  showControlsOnly = false\n}) => {\n  _s();\n  const [violations, setViolations] = useState([]);\n  const [violationHistory, setViolationHistory] = useState([]);\n  const [settings, setSettings] = useState({\n    enabled: true,\n    sensitivity: 0.7,\n    // Confidence threshold for violations\n    temporalWindow: 3,\n    // Seconds to track violations\n    movementThreshold: 20 // Pixels of movement to consider \"handling\"\n  });\n  const violationCanvasRef = useRef(null);\n  const handTrackingRef = useRef(new Map()); // Track hand positions over time\n\n  // Violation types with professional configuration\n  const violationTypes = {\n    HAND_IN_INGREDIENT_NO_SCOOPER: {\n      severity: 'high',\n      color: '#FF3333',\n      icon: 'ðŸš¨',\n      title: 'Hand Contact Without Scooper',\n      description: 'Hand detected in ingredient area without scooper present'\n    },\n    CROSS_CONTAMINATION: {\n      severity: 'high',\n      color: '#FF6B35',\n      icon: 'âš ï¸',\n      title: 'Cross Contamination Risk',\n      description: 'Hand moved between different ingredient areas without cleaning'\n    },\n    IMPROPER_TOOL_USE: {\n      severity: 'medium',\n      color: '#FFD23F',\n      icon: 'ðŸ¥„',\n      title: 'Improper Tool Usage',\n      description: 'Scooper used incorrectly or in wrong area'\n    },\n    EXTENDED_CONTACT: {\n      severity: 'medium',\n      color: '#FF8C42',\n      icon: 'â±ï¸',\n      title: 'Extended Hand Contact',\n      description: 'Hand in ingredient area for extended period'\n    }\n  };\n  useEffect(() => {\n    console.log('ðŸš¨ ViolationDetector useEffect:', {\n      enabled: settings.enabled,\n      detections: detections.length,\n      zones: zones.length,\n      frameSize: `${frameWidth}x${frameHeight}`\n    });\n    if (settings.enabled && detections.length > 0 && zones.length > 0) {\n      console.log('ðŸ” Starting violation analysis...');\n      analyzeViolations();\n    } else {\n      console.log('â¸ï¸ Violation analysis skipped:', {\n        enabled: settings.enabled,\n        hasDetections: detections.length > 0,\n        hasZones: zones.length > 0\n      });\n    }\n  }, [detections, zones, settings.enabled]);\n  useEffect(() => {\n    drawViolationOverlay();\n  }, [violations, frameWidth, frameHeight]);\n  const analyzeViolations = () => {\n    const currentTime = Date.now();\n    const newViolations = [];\n\n    // Get current hands and scoopers\n    const hands = detections.filter(d => d.class_name === 'hand');\n    const scoopers = detections.filter(d => d.class_name === 'scooper');\n    const persons = detections.filter(d => d.class_name === 'person');\n    console.log('ðŸ” Analyzing violations:', {\n      hands: hands.length,\n      scoopers: scoopers.length,\n      persons: persons.length,\n      zones: zones.length\n    });\n\n    // Analyze each hand\n    hands.forEach((hand, handIndex) => {\n      const handId = `hand_${handIndex}`;\n      const handCenter = {\n        x: (hand.bbox.x1 + hand.bbox.x2) / 2,\n        y: (hand.bbox.y1 + hand.bbox.y2) / 2\n      };\n\n      // Update hand tracking\n      if (!handTrackingRef.current.has(handId)) {\n        handTrackingRef.current.set(handId, {\n          positions: [],\n          lastZone: null,\n          firstDetected: currentTime\n        });\n      }\n      const handTracking = handTrackingRef.current.get(handId);\n      handTracking.positions.push({\n        ...handCenter,\n        timestamp: currentTime,\n        confidence: hand.confidence\n      });\n\n      // Keep only recent positions (temporal window)\n      const windowMs = settings.temporalWindow * 1000;\n      handTracking.positions = handTracking.positions.filter(pos => currentTime - pos.timestamp < windowMs);\n\n      // Check which zone the hand is in\n      const currentZone = findZoneContainingPoint(handCenter.x, handCenter.y);\n      if (currentZone && currentZone.requiresScooper) {\n        // Check for scooper presence near this hand\n        const nearbyScoopers = scoopers.filter(scooper => {\n          const scooperCenter = {\n            x: (scooper.bbox.x1 + scooper.bbox.x2) / 2,\n            y: (scooper.bbox.y1 + scooper.bbox.y2) / 2\n          };\n          const distance = Math.sqrt(Math.pow(handCenter.x - scooperCenter.x, 2) + Math.pow(handCenter.y - scooperCenter.y, 2));\n          return distance < 100; // Within 100 pixels\n        });\n\n        // Check for movement (indicates handling, not just cleaning)\n        const isHandling = checkHandMovement(handTracking.positions);\n\n        // VIOLATION: Hand in ingredient area without scooper\n        if (nearbyScoopers.length === 0 && isHandling) {\n          const violation = createViolation('HAND_IN_INGREDIENT_NO_SCOOPER', {\n            handId,\n            hand,\n            zone: currentZone,\n            confidence: hand.confidence,\n            position: handCenter,\n            duration: (currentTime - handTracking.firstDetected) / 1000\n          });\n          newViolations.push(violation);\n        }\n\n        // VIOLATION: Cross contamination check\n        if (handTracking.lastZone && handTracking.lastZone.id !== currentZone.id && handTracking.lastZone.requiresScooper) {\n          const violation = createViolation('CROSS_CONTAMINATION', {\n            handId,\n            hand,\n            fromZone: handTracking.lastZone,\n            toZone: currentZone,\n            confidence: hand.confidence * 0.8,\n            // Slightly lower confidence\n            position: handCenter\n          });\n          newViolations.push(violation);\n        }\n\n        // VIOLATION: Extended contact\n        const contactDuration = (currentTime - handTracking.firstDetected) / 1000;\n        if (contactDuration > 5 && nearbyScoopers.length === 0) {\n          // 5 seconds\n          const violation = createViolation('EXTENDED_CONTACT', {\n            handId,\n            hand,\n            zone: currentZone,\n            confidence: Math.min(hand.confidence + 0.1, 1.0),\n            position: handCenter,\n            duration: contactDuration\n          });\n          newViolations.push(violation);\n        }\n        handTracking.lastZone = currentZone;\n      }\n    });\n\n    // Clean up old hand tracking data\n    const activeHandIds = hands.map((_, index) => `hand_${index}`);\n    for (const [handId, tracking] of handTrackingRef.current.entries()) {\n      var _tracking$positions;\n      if (!activeHandIds.includes(handId) && currentTime - ((_tracking$positions = tracking.positions[tracking.positions.length - 1]) === null || _tracking$positions === void 0 ? void 0 : _tracking$positions.timestamp) > 2000) {\n        handTrackingRef.current.delete(handId);\n      }\n    }\n\n    // Update violations\n    if (newViolations.length > 0) {\n      setViolations(newViolations);\n      setViolationHistory(prev => [...prev, ...newViolations].slice(-50)); // Keep last 50\n\n      // Notify parent component and show toasts\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n        const config = violationTypes[violation.type];\n        toast.error(`${config.icon} ${config.title}`, {\n          position: \"top-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true\n        });\n      });\n    } else {\n      setViolations([]);\n    }\n  };\n\n  // Point-in-polygon algorithm for polygon zone detection\n  const isPointInPolygon = (point, polygon) => {\n    const x = point.x;\n    const y = point.y;\n    let inside = false;\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      const xi = polygon[i].x;\n      const yi = polygon[i].y;\n      const xj = polygon[j].x;\n      const yj = polygon[j].y;\n      if (yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  };\n  const findZoneContainingPoint = (x, y) => {\n    // x, y are detection coordinates (natural frame coordinates)\n    // zones are stored in natural frame coordinates\n    const foundZone = zones.find(zone => {\n      if (zone.shape === 'polygon' && zone.points && zone.points.length >= 3) {\n        // Handle polygon zones\n        const inZone = isPointInPolygon({\n          x,\n          y\n        }, zone.points);\n        if (inZone) {\n          console.log(`ðŸ”º Point (${x.toFixed(1)}, ${y.toFixed(1)}) is in polygon zone ${zone.name}:`, {\n            point: {\n              x,\n              y\n            },\n            polygonPoints: zone.points.length,\n            zoneName: zone.name\n          });\n        }\n        return inZone;\n      } else if (zone.points && zone.points.length === 2) {\n        // Handle rectangle zones (legacy format)\n        const [p1, p2] = zone.points;\n        const inZone = x >= Math.min(p1.x, p2.x) && x <= Math.max(p1.x, p2.x) && y >= Math.min(p1.y, p2.y) && y <= Math.max(p1.y, p2.y);\n        if (inZone) {\n          console.log(`ðŸ“¦ Point (${x.toFixed(1)}, ${y.toFixed(1)}) is in rectangle zone ${zone.name}:`, {\n            point: {\n              x,\n              y\n            },\n            zone: {\n              p1,\n              p2\n            },\n            zoneName: zone.name\n          });\n        }\n        return inZone;\n      }\n      return false;\n    });\n    return foundZone;\n  };\n  const checkHandMovement = positions => {\n    if (positions.length < 2) return false;\n    let totalMovement = 0;\n    for (let i = 1; i < positions.length; i++) {\n      const distance = Math.sqrt(Math.pow(positions[i].x - positions[i - 1].x, 2) + Math.pow(positions[i].y - positions[i - 1].y, 2));\n      totalMovement += distance;\n    }\n    return totalMovement > settings.movementThreshold;\n  };\n  const createViolation = (type, data) => {\n    return {\n      id: `violation_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type,\n      timestamp: new Date().toISOString(),\n      severity: violationTypes[type].severity,\n      confidence: data.confidence,\n      description: violationTypes[type].description,\n      details: data,\n      resolved: false\n    };\n  };\n  const drawViolationOverlay = () => {\n    const canvas = violationCanvasRef.current;\n    if (!canvas || violations.length === 0) return;\n    const ctx = canvas.getContext('2d');\n\n    // Get the video element to match its display size\n    const videoElement = document.querySelector('img[alt=\"Current frame\"]');\n    if (videoElement) {\n      const rect = videoElement.getBoundingClientRect();\n      canvas.width = rect.width;\n      canvas.height = rect.height;\n      canvas.style.width = rect.width + 'px';\n      canvas.style.height = rect.height + 'px';\n    } else {\n      canvas.width = frameWidth;\n      canvas.height = frameHeight;\n    }\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Calculate scaling from natural to display coordinates\n    const naturalWidth = frameWidth;\n    const naturalHeight = frameHeight;\n    const displayWidth = canvas.width;\n    const displayHeight = canvas.height;\n    const scaleX = displayWidth / naturalWidth;\n    const scaleY = displayHeight / naturalHeight;\n    console.log('ðŸš¨ Drawing violations:', {\n      violations: violations.length,\n      naturalSize: `${naturalWidth}x${naturalHeight}`,\n      displaySize: `${displayWidth}x${displayHeight}`,\n      scale: `${scaleX.toFixed(3)}x${scaleY.toFixed(3)}`\n    });\n\n    // Draw violation indicators\n    violations.forEach((violation, index) => {\n      const config = violationTypes[violation.type];\n      const position = violation.details.position;\n      if (position) {\n        // Scale position from natural to display coordinates\n        const displayX = position.x * scaleX;\n        const displayY = position.y * scaleY;\n\n        // Pulsing violation indicator\n        const pulseScale = 1 + 0.3 * Math.sin(Date.now() / 200);\n        const radius = 30 * pulseScale;\n\n        // Outer glow\n        ctx.beginPath();\n        ctx.arc(displayX, displayY, radius + 10, 0, 2 * Math.PI);\n        ctx.fillStyle = config.color + '40'; // 25% opacity\n        ctx.fill();\n\n        // Main circle\n        ctx.beginPath();\n        ctx.arc(displayX, displayY, radius, 0, 2 * Math.PI);\n        ctx.fillStyle = config.color + 'AA'; // 67% opacity\n        ctx.fill();\n        ctx.strokeStyle = config.color;\n        ctx.lineWidth = 3;\n        ctx.stroke();\n\n        // Icon\n        ctx.fillStyle = '#FFFFFF';\n        ctx.font = 'bold 20px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(config.icon, displayX, displayY + 7);\n\n        // Violation type label\n        ctx.fillStyle = config.color;\n        ctx.font = 'bold 12px Arial';\n        ctx.fillText(violation.type.replace(/_/g, ' '), displayX, displayY - radius - 10);\n        console.log(`ðŸš¨ Drew violation at:`, {\n          natural: `(${position.x.toFixed(1)}, ${position.y.toFixed(1)})`,\n          display: `(${displayX.toFixed(1)}, ${displayY.toFixed(1)})`,\n          type: violation.type\n        });\n      }\n    });\n  };\n  const getViolationStats = () => {\n    const now = new Date();\n    const last24h = violationHistory.filter(v => {\n      const violationTime = new Date(v.timestamp);\n      const hoursDiff = (now - violationTime) / (1000 * 60 * 60);\n      return hoursDiff < 24;\n    });\n    const byType = {};\n    last24h.forEach(v => {\n      byType[v.type] = (byType[v.type] || 0) + 1;\n    });\n    return {\n      total: violationHistory.length,\n      last24h: last24h.length,\n      current: violations.length,\n      byType\n    };\n  };\n  const stats = getViolationStats();\n\n  // If only showing controls, return just the settings panel\n  if (showControlsOnly) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(255, 255, 255, 0.05)',\n          padding: '12px',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          border: '1px solid rgba(255, 255, 255, 0.1)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '0 0 12px 0',\n            color: '#FFD700',\n            fontSize: '14px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: \"\\uD83D\\uDEA8 Violation Detection Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 445,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '20px',\n            marginBottom: '12px',\n            flexWrap: 'wrap',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              cursor: 'pointer',\n              padding: '4px 8px',\n              borderRadius: '4px',\n              background: settings.enabled ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: settings.enabled,\n              onChange: e => setSettings({\n                ...settings,\n                enabled: e.target.checked\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 466,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: '500'\n              },\n              children: settings.enabled ? 'âœ… Detection Active' : 'âŒ Detection Disabled'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 471,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: '500',\n                minWidth: '80px'\n              },\n              children: \"Sensitivity:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0.1\",\n              max: \"1.0\",\n              step: \"0.1\",\n              value: settings.sensitivity,\n              onChange: e => setSettings({\n                ...settings,\n                sensitivity: parseFloat(e.target.value)\n              }),\n              style: {\n                width: '120px'\n              },\n              disabled: !settings.enabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                minWidth: '30px',\n                fontWeight: 'bold',\n                color: settings.sensitivity >= 0.8 ? '#ef4444' : settings.sensitivity >= 0.5 ? '#f59e0b' : '#10b981'\n              },\n              children: settings.sensitivity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            color: '#94a3b8',\n            lineHeight: '1.4',\n            background: 'rgba(0, 0, 0, 0.2)',\n            padding: '8px',\n            borderRadius: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"How it works:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 43\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Low (0.1-0.4):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this), \" Detects obvious violations only\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 78\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Medium (0.5-0.7):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 15\n          }, this), \" Balanced detection (recommended)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 508,\n            columnNumber: 82\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"High (0.8-1.0):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 15\n          }, this), \" Detects potential violations aggressively\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 509,\n            columnNumber: 89\n          }, this), /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"Higher sensitivity may increase false positives\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 510,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 498,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n          gap: '12px',\n          marginBottom: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#FF3333'\n            },\n            children: stats.current\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Active Violations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#FFD23F'\n            },\n            children: stats.last24h\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Last 24 Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#2ED573'\n            },\n            children: stats.total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 530,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Total Detected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 531,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 529,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 9\n      }, this), violations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: 'rgba(255, 51, 51, 0.2)',\n          borderRadius: '6px',\n          border: '2px solid #FF3333'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            margin: '0 0 8px 0',\n            color: '#FF3333'\n          },\n          children: \"\\uD83D\\uDEA8 Active Violations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 543,\n          columnNumber: 13\n        }, this), violations.map((violation, index) => {\n          const config = violationTypes[violation.type];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '8px',\n              padding: '8px',\n              background: 'rgba(255,255,255,0.1)',\n              borderRadius: '4px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: config.color\n                },\n                children: [config.icon, \" \", config.title]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  background: config.color,\n                  color: 'white',\n                  padding: '2px 6px',\n                  borderRadius: '4px',\n                  fontSize: '12px'\n                },\n                children: violation.severity.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 557,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                opacity: 0.9,\n                marginTop: '4px'\n              },\n              children: config.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 567,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '12px',\n                opacity: 0.7,\n                marginTop: '4px'\n              },\n              children: [\"Confidence: \", (violation.confidence * 100).toFixed(1), \"% | Time: \", new Date(violation.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 570,\n              columnNumber: 19\n            }, this)]\n          }, violation.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 547,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Main component with canvas overlay and optional controls\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      position: 'relative'\n    },\n    children: [!hideControls && /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: violationCanvasRef,\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        pointerEvents: 'none',\n        zIndex: 30,\n        borderRadius: '8px'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 9\n    }, this), !hideControls && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '16px',\n        padding: '16px',\n        background: 'rgba(255,255,255,0.1)',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 12px 0',\n          color: '#fff'\n        },\n        children: \"\\uD83D\\uDEA8 Violation Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          background: 'rgba(255, 255, 255, 0.05)',\n          padding: '12px',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          border: '1px solid rgba(255, 255, 255, 0.1)'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '0 0 12px 0',\n            color: '#FFD700',\n            fontSize: '14px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          },\n          children: \"\\uD83D\\uDEA8 Violation Detection Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 619,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '20px',\n            marginBottom: '12px',\n            flexWrap: 'wrap',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              cursor: 'pointer',\n              padding: '4px 8px',\n              borderRadius: '4px',\n              background: settings.enabled ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: settings.enabled,\n              onChange: e => setSettings({\n                ...settings,\n                enabled: e.target.checked\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: '500'\n              },\n              children: settings.enabled ? 'âœ… Detection Active' : 'âŒ Detection Disabled'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 645,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                fontWeight: '500',\n                minWidth: '80px'\n              },\n              children: \"Sensitivity:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 651,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"range\",\n              min: \"0.1\",\n              max: \"1.0\",\n              step: \"0.1\",\n              value: settings.sensitivity,\n              onChange: e => setSettings({\n                ...settings,\n                sensitivity: parseFloat(e.target.value)\n              }),\n              style: {\n                width: '120px'\n              },\n              disabled: !settings.enabled\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                minWidth: '30px',\n                fontWeight: 'bold',\n                color: settings.sensitivity >= 0.8 ? '#ef4444' : settings.sensitivity >= 0.5 ? '#f59e0b' : '#10b981'\n              },\n              children: settings.sensitivity\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 650,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 630,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '12px',\n            color: '#94a3b8',\n            lineHeight: '1.4',\n            background: 'rgba(0, 0, 0, 0.2)',\n            padding: '8px',\n            borderRadius: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"How it works:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 45\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Low (0.1-0.4):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 17\n          }, this), \" Detects obvious violations only\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 80\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Medium (0.5-0.7):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 17\n          }, this), \" Balanced detection (recommended)\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 84\n          }, this), \"\\u2022 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"High (0.8-1.0):\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 17\n          }, this), \" Detects potential violations aggressively\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 683,\n            columnNumber: 91\n          }, this), /*#__PURE__*/_jsxDEV(\"em\", {\n            children: \"Higher sensitivity may increase false positives\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 684,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n          gap: '12px',\n          marginBottom: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#FF3333'\n            },\n            children: stats.current\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Active Violations\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 697,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 695,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#FFD23F'\n            },\n            children: stats.last24h\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 700,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Last 24 Hours\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 701,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center',\n            padding: '8px',\n            background: 'rgba(255,255,255,0.1)',\n            borderRadius: '6px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '24px',\n              fontWeight: 'bold',\n              color: '#2ED573'\n            },\n            children: stats.total\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 704,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              opacity: 0.8\n            },\n            children: \"Total Detected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 705,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 689,\n        columnNumber: 11\n      }, this), violations.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: 'rgba(255, 51, 51, 0.2)',\n          borderRadius: '6px',\n          border: '2px solid #FF3333'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          style: {\n            margin: '0 0 8px 0',\n            color: '#FF3333'\n          },\n          children: \"\\uD83D\\uDEA8 Active Violations\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 15\n        }, this), violations.map((violation, index) => {\n          const config = violationTypes[violation.type];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginBottom: '8px',\n              padding: '8px',\n              background: 'rgba(255,255,255,0.1)',\n              borderRadius: '4px'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                style: {\n                  color: config.color\n                },\n                children: [config.icon, \" \", config.title]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 728,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  background: config.color,\n                  color: 'white',\n                  padding: '2px 6px',\n                  borderRadius: '4px',\n                  fontSize: '12px'\n                },\n                children: violation.severity.toUpperCase()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 731,\n                columnNumber: 23\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 727,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '14px',\n                opacity: 0.9,\n                marginTop: '4px'\n              },\n              children: config.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                fontSize: '12px',\n                opacity: 0.7,\n                marginTop: '4px'\n              },\n              children: [\"Confidence: \", (violation.confidence * 100).toFixed(1), \"% | Time: \", new Date(violation.timestamp).toLocaleTimeString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 744,\n              columnNumber: 21\n            }, this)]\n          }, violation.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 721,\n            columnNumber: 19\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 603,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 585,\n    columnNumber: 5\n  }, this);\n};\n_s(ViolationDetector, \"9C/pPEmd9tcohTjk2MuwT7WWdGU=\");\n_c = ViolationDetector;\nexport default ViolationDetector;\nvar _c;\n$RefreshReg$(_c, \"ViolationDetector\");","map":{"version":3,"names":["React","useState","useEffect","useRef","toast","jsxDEV","_jsxDEV","ViolationDetector","detections","zones","frameWidth","frameHeight","onViolationDetected","hideControls","showControlsOnly","_s","violations","setViolations","violationHistory","setViolationHistory","settings","setSettings","enabled","sensitivity","temporalWindow","movementThreshold","violationCanvasRef","handTrackingRef","Map","violationTypes","HAND_IN_INGREDIENT_NO_SCOOPER","severity","color","icon","title","description","CROSS_CONTAMINATION","IMPROPER_TOOL_USE","EXTENDED_CONTACT","console","log","length","frameSize","analyzeViolations","hasDetections","hasZones","drawViolationOverlay","currentTime","Date","now","newViolations","hands","filter","d","class_name","scoopers","persons","forEach","hand","handIndex","handId","handCenter","x","bbox","x1","x2","y","y1","y2","current","has","set","positions","lastZone","firstDetected","handTracking","get","push","timestamp","confidence","windowMs","pos","currentZone","findZoneContainingPoint","requiresScooper","nearbyScoopers","scooper","scooperCenter","distance","Math","sqrt","pow","isHandling","checkHandMovement","violation","createViolation","zone","position","duration","id","fromZone","toZone","contactDuration","min","activeHandIds","map","_","index","tracking","entries","_tracking$positions","includes","delete","prev","slice","config","type","error","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","isPointInPolygon","point","polygon","inside","i","j","xi","yi","xj","yj","foundZone","find","shape","points","inZone","toFixed","name","polygonPoints","zoneName","p1","p2","max","totalMovement","data","random","toString","substr","toISOString","details","resolved","canvas","ctx","getContext","videoElement","document","querySelector","rect","getBoundingClientRect","width","height","style","clearRect","naturalWidth","naturalHeight","displayWidth","displayHeight","scaleX","scaleY","naturalSize","displaySize","scale","displayX","displayY","pulseScale","sin","radius","beginPath","arc","PI","fillStyle","fill","strokeStyle","lineWidth","stroke","font","textAlign","fillText","replace","natural","display","getViolationStats","last24h","v","violationTime","hoursDiff","byType","total","stats","children","background","padding","borderRadius","marginBottom","border","margin","fontSize","alignItems","gap","fileName","_jsxFileName","lineNumber","columnNumber","flexWrap","cursor","checked","onChange","e","target","fontWeight","minWidth","step","value","parseFloat","disabled","lineHeight","gridTemplateColumns","opacity","justifyContent","toUpperCase","marginTop","toLocaleTimeString","ref","top","left","pointerEvents","zIndex","_c","$RefreshReg$"],"sources":["C:/Users/ayoub/OneDrive/Desktop/eagleAI/pizza_store_detection/services/frontend/src/components/ViolationDetector.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { toast } from 'react-toastify';\n\nconst ViolationDetector = ({\n  detections = [],\n  zones = [],\n  frameWidth = 640,\n  frameHeight = 480,\n  onViolationDetected,\n  hideControls = false,\n  showControlsOnly = false\n}) => {\n  const [violations, setViolations] = useState([]);\n  const [violationHistory, setViolationHistory] = useState([]);\n  const [settings, setSettings] = useState({\n    enabled: true,\n    sensitivity: 0.7, // Confidence threshold for violations\n    temporalWindow: 3, // Seconds to track violations\n    movementThreshold: 20, // Pixels of movement to consider \"handling\"\n  });\n  \n  const violationCanvasRef = useRef(null);\n  const handTrackingRef = useRef(new Map()); // Track hand positions over time\n\n  // Violation types with professional configuration\n  const violationTypes = {\n    HAND_IN_INGREDIENT_NO_SCOOPER: {\n      severity: 'high',\n      color: '#FF3333',\n      icon: 'ðŸš¨',\n      title: 'Hand Contact Without Scooper',\n      description: 'Hand detected in ingredient area without scooper present'\n    },\n    CROSS_CONTAMINATION: {\n      severity: 'high', \n      color: '#FF6B35',\n      icon: 'âš ï¸',\n      title: 'Cross Contamination Risk',\n      description: 'Hand moved between different ingredient areas without cleaning'\n    },\n    IMPROPER_TOOL_USE: {\n      severity: 'medium',\n      color: '#FFD23F',\n      icon: 'ðŸ¥„',\n      title: 'Improper Tool Usage',\n      description: 'Scooper used incorrectly or in wrong area'\n    },\n    EXTENDED_CONTACT: {\n      severity: 'medium',\n      color: '#FF8C42',\n      icon: 'â±ï¸',\n      title: 'Extended Hand Contact',\n      description: 'Hand in ingredient area for extended period'\n    }\n  };\n\n  useEffect(() => {\n    console.log('ðŸš¨ ViolationDetector useEffect:', {\n      enabled: settings.enabled,\n      detections: detections.length,\n      zones: zones.length,\n      frameSize: `${frameWidth}x${frameHeight}`\n    });\n\n    if (settings.enabled && detections.length > 0 && zones.length > 0) {\n      console.log('ðŸ” Starting violation analysis...');\n      analyzeViolations();\n    } else {\n      console.log('â¸ï¸ Violation analysis skipped:', {\n        enabled: settings.enabled,\n        hasDetections: detections.length > 0,\n        hasZones: zones.length > 0\n      });\n    }\n  }, [detections, zones, settings.enabled]);\n\n  useEffect(() => {\n    drawViolationOverlay();\n  }, [violations, frameWidth, frameHeight]);\n\n  const analyzeViolations = () => {\n    const currentTime = Date.now();\n    const newViolations = [];\n\n    // Get current hands and scoopers\n    const hands = detections.filter(d => d.class_name === 'hand');\n    const scoopers = detections.filter(d => d.class_name === 'scooper');\n    const persons = detections.filter(d => d.class_name === 'person');\n\n    console.log('ðŸ” Analyzing violations:', {\n      hands: hands.length,\n      scoopers: scoopers.length,\n      persons: persons.length,\n      zones: zones.length\n    });\n\n    // Analyze each hand\n    hands.forEach((hand, handIndex) => {\n      const handId = `hand_${handIndex}`;\n      const handCenter = {\n        x: (hand.bbox.x1 + hand.bbox.x2) / 2,\n        y: (hand.bbox.y1 + hand.bbox.y2) / 2\n      };\n\n      // Update hand tracking\n      if (!handTrackingRef.current.has(handId)) {\n        handTrackingRef.current.set(handId, {\n          positions: [],\n          lastZone: null,\n          firstDetected: currentTime\n        });\n      }\n\n      const handTracking = handTrackingRef.current.get(handId);\n      handTracking.positions.push({\n        ...handCenter,\n        timestamp: currentTime,\n        confidence: hand.confidence\n      });\n\n      // Keep only recent positions (temporal window)\n      const windowMs = settings.temporalWindow * 1000;\n      handTracking.positions = handTracking.positions.filter(\n        pos => currentTime - pos.timestamp < windowMs\n      );\n\n      // Check which zone the hand is in\n      const currentZone = findZoneContainingPoint(handCenter.x, handCenter.y);\n      \n      if (currentZone && currentZone.requiresScooper) {\n        // Check for scooper presence near this hand\n        const nearbyScoopers = scoopers.filter(scooper => {\n          const scooperCenter = {\n            x: (scooper.bbox.x1 + scooper.bbox.x2) / 2,\n            y: (scooper.bbox.y1 + scooper.bbox.y2) / 2\n          };\n          const distance = Math.sqrt(\n            Math.pow(handCenter.x - scooperCenter.x, 2) + \n            Math.pow(handCenter.y - scooperCenter.y, 2)\n          );\n          return distance < 100; // Within 100 pixels\n        });\n\n        // Check for movement (indicates handling, not just cleaning)\n        const isHandling = checkHandMovement(handTracking.positions);\n\n        // VIOLATION: Hand in ingredient area without scooper\n        if (nearbyScoopers.length === 0 && isHandling) {\n          const violation = createViolation(\n            'HAND_IN_INGREDIENT_NO_SCOOPER',\n            {\n              handId,\n              hand,\n              zone: currentZone,\n              confidence: hand.confidence,\n              position: handCenter,\n              duration: (currentTime - handTracking.firstDetected) / 1000\n            }\n          );\n          newViolations.push(violation);\n        }\n\n        // VIOLATION: Cross contamination check\n        if (handTracking.lastZone && \n            handTracking.lastZone.id !== currentZone.id && \n            handTracking.lastZone.requiresScooper) {\n          const violation = createViolation(\n            'CROSS_CONTAMINATION',\n            {\n              handId,\n              hand,\n              fromZone: handTracking.lastZone,\n              toZone: currentZone,\n              confidence: hand.confidence * 0.8, // Slightly lower confidence\n              position: handCenter\n            }\n          );\n          newViolations.push(violation);\n        }\n\n        // VIOLATION: Extended contact\n        const contactDuration = (currentTime - handTracking.firstDetected) / 1000;\n        if (contactDuration > 5 && nearbyScoopers.length === 0) { // 5 seconds\n          const violation = createViolation(\n            'EXTENDED_CONTACT',\n            {\n              handId,\n              hand,\n              zone: currentZone,\n              confidence: Math.min(hand.confidence + 0.1, 1.0),\n              position: handCenter,\n              duration: contactDuration\n            }\n          );\n          newViolations.push(violation);\n        }\n\n        handTracking.lastZone = currentZone;\n      }\n    });\n\n    // Clean up old hand tracking data\n    const activeHandIds = hands.map((_, index) => `hand_${index}`);\n    for (const [handId, tracking] of handTrackingRef.current.entries()) {\n      if (!activeHandIds.includes(handId) && \n          currentTime - tracking.positions[tracking.positions.length - 1]?.timestamp > 2000) {\n        handTrackingRef.current.delete(handId);\n      }\n    }\n\n    // Update violations\n    if (newViolations.length > 0) {\n      setViolations(newViolations);\n      setViolationHistory(prev => [...prev, ...newViolations].slice(-50)); // Keep last 50\n      \n      // Notify parent component and show toasts\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n        \n        const config = violationTypes[violation.type];\n        toast.error(`${config.icon} ${config.title}`, {\n          position: \"top-center\",\n          autoClose: 5000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          draggable: true,\n        });\n      });\n    } else {\n      setViolations([]);\n    }\n  };\n\n  // Point-in-polygon algorithm for polygon zone detection\n  const isPointInPolygon = (point, polygon) => {\n    const x = point.x;\n    const y = point.y;\n    let inside = false;\n\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      const xi = polygon[i].x;\n      const yi = polygon[i].y;\n      const xj = polygon[j].x;\n      const yj = polygon[j].y;\n\n      if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  };\n\n  const findZoneContainingPoint = (x, y) => {\n    // x, y are detection coordinates (natural frame coordinates)\n    // zones are stored in natural frame coordinates\n    const foundZone = zones.find(zone => {\n      if (zone.shape === 'polygon' && zone.points && zone.points.length >= 3) {\n        // Handle polygon zones\n        const inZone = isPointInPolygon({ x, y }, zone.points);\n\n        if (inZone) {\n          console.log(`ðŸ”º Point (${x.toFixed(1)}, ${y.toFixed(1)}) is in polygon zone ${zone.name}:`, {\n            point: { x, y },\n            polygonPoints: zone.points.length,\n            zoneName: zone.name\n          });\n        }\n\n        return inZone;\n      } else if (zone.points && zone.points.length === 2) {\n        // Handle rectangle zones (legacy format)\n        const [p1, p2] = zone.points;\n        const inZone = x >= Math.min(p1.x, p2.x) && x <= Math.max(p1.x, p2.x) &&\n                      y >= Math.min(p1.y, p2.y) && y <= Math.max(p1.y, p2.y);\n\n        if (inZone) {\n          console.log(`ðŸ“¦ Point (${x.toFixed(1)}, ${y.toFixed(1)}) is in rectangle zone ${zone.name}:`, {\n            point: { x, y },\n            zone: { p1, p2 },\n            zoneName: zone.name\n          });\n        }\n\n        return inZone;\n      }\n      return false;\n    });\n\n    return foundZone;\n  };\n\n  const checkHandMovement = (positions) => {\n    if (positions.length < 2) return false;\n    \n    let totalMovement = 0;\n    for (let i = 1; i < positions.length; i++) {\n      const distance = Math.sqrt(\n        Math.pow(positions[i].x - positions[i-1].x, 2) + \n        Math.pow(positions[i].y - positions[i-1].y, 2)\n      );\n      totalMovement += distance;\n    }\n    \n    return totalMovement > settings.movementThreshold;\n  };\n\n  const createViolation = (type, data) => {\n    return {\n      id: `violation_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n      type,\n      timestamp: new Date().toISOString(),\n      severity: violationTypes[type].severity,\n      confidence: data.confidence,\n      description: violationTypes[type].description,\n      details: data,\n      resolved: false\n    };\n  };\n\n  const drawViolationOverlay = () => {\n    const canvas = violationCanvasRef.current;\n    if (!canvas || violations.length === 0) return;\n\n    const ctx = canvas.getContext('2d');\n\n    // Get the video element to match its display size\n    const videoElement = document.querySelector('img[alt=\"Current frame\"]');\n    if (videoElement) {\n      const rect = videoElement.getBoundingClientRect();\n      canvas.width = rect.width;\n      canvas.height = rect.height;\n      canvas.style.width = rect.width + 'px';\n      canvas.style.height = rect.height + 'px';\n    } else {\n      canvas.width = frameWidth;\n      canvas.height = frameHeight;\n    }\n\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // Calculate scaling from natural to display coordinates\n    const naturalWidth = frameWidth;\n    const naturalHeight = frameHeight;\n    const displayWidth = canvas.width;\n    const displayHeight = canvas.height;\n    const scaleX = displayWidth / naturalWidth;\n    const scaleY = displayHeight / naturalHeight;\n\n    console.log('ðŸš¨ Drawing violations:', {\n      violations: violations.length,\n      naturalSize: `${naturalWidth}x${naturalHeight}`,\n      displaySize: `${displayWidth}x${displayHeight}`,\n      scale: `${scaleX.toFixed(3)}x${scaleY.toFixed(3)}`\n    });\n\n    // Draw violation indicators\n    violations.forEach((violation, index) => {\n      const config = violationTypes[violation.type];\n      const position = violation.details.position;\n\n      if (position) {\n        // Scale position from natural to display coordinates\n        const displayX = position.x * scaleX;\n        const displayY = position.y * scaleY;\n\n        // Pulsing violation indicator\n        const pulseScale = 1 + 0.3 * Math.sin(Date.now() / 200);\n        const radius = 30 * pulseScale;\n        \n        // Outer glow\n        ctx.beginPath();\n        ctx.arc(displayX, displayY, radius + 10, 0, 2 * Math.PI);\n        ctx.fillStyle = config.color + '40'; // 25% opacity\n        ctx.fill();\n\n        // Main circle\n        ctx.beginPath();\n        ctx.arc(displayX, displayY, radius, 0, 2 * Math.PI);\n        ctx.fillStyle = config.color + 'AA'; // 67% opacity\n        ctx.fill();\n        ctx.strokeStyle = config.color;\n        ctx.lineWidth = 3;\n        ctx.stroke();\n\n        // Icon\n        ctx.fillStyle = '#FFFFFF';\n        ctx.font = 'bold 20px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(config.icon, displayX, displayY + 7);\n\n        // Violation type label\n        ctx.fillStyle = config.color;\n        ctx.font = 'bold 12px Arial';\n        ctx.fillText(violation.type.replace(/_/g, ' '), displayX, displayY - radius - 10);\n\n        console.log(`ðŸš¨ Drew violation at:`, {\n          natural: `(${position.x.toFixed(1)}, ${position.y.toFixed(1)})`,\n          display: `(${displayX.toFixed(1)}, ${displayY.toFixed(1)})`,\n          type: violation.type\n        });\n      }\n    });\n  };\n\n  const getViolationStats = () => {\n    const now = new Date();\n    const last24h = violationHistory.filter(v => {\n      const violationTime = new Date(v.timestamp);\n      const hoursDiff = (now - violationTime) / (1000 * 60 * 60);\n      return hoursDiff < 24;\n    });\n    \n    const byType = {};\n    last24h.forEach(v => {\n      byType[v.type] = (byType[v.type] || 0) + 1;\n    });\n\n    return {\n      total: violationHistory.length,\n      last24h: last24h.length,\n      current: violations.length,\n      byType\n    };\n  };\n\n  const stats = getViolationStats();\n\n  // If only showing controls, return just the settings panel\n  if (showControlsOnly) {\n    return (\n      <div style={{ width: '100%' }}>\n        \n        {/* Violation Detection Settings */}\n        <div style={{\n          background: 'rgba(255, 255, 255, 0.05)',\n          padding: '12px',\n          borderRadius: '8px',\n          marginBottom: '16px',\n          border: '1px solid rgba(255, 255, 255, 0.1)'\n        }}>\n          <h4 style={{\n            margin: '0 0 12px 0',\n            color: '#FFD700',\n            fontSize: '14px',\n            display: 'flex',\n            alignItems: 'center',\n            gap: '8px'\n          }}>\n            ðŸš¨ Violation Detection Settings\n          </h4>\n\n          <div style={{ display: 'flex', gap: '20px', marginBottom: '12px', flexWrap: 'wrap', alignItems: 'center' }}>\n            <label style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px',\n              cursor: 'pointer',\n              padding: '4px 8px',\n              borderRadius: '4px',\n              background: settings.enabled ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\n            }}>\n              <input\n                type=\"checkbox\"\n                checked={settings.enabled}\n                onChange={(e) => setSettings({...settings, enabled: e.target.checked})}\n              />\n              <span style={{ fontWeight: '500' }}>\n                {settings.enabled ? 'âœ… Detection Active' : 'âŒ Detection Disabled'}\n              </span>\n            </label>\n\n            <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n              <span style={{ fontWeight: '500', minWidth: '80px' }}>Sensitivity:</span>\n              <input\n                type=\"range\"\n                min=\"0.1\"\n                max=\"1.0\"\n                step=\"0.1\"\n                value={settings.sensitivity}\n                onChange={(e) => setSettings({...settings, sensitivity: parseFloat(e.target.value)})}\n                style={{ width: '120px' }}\n                disabled={!settings.enabled}\n              />\n              <span style={{\n                minWidth: '30px',\n                fontWeight: 'bold',\n                color: settings.sensitivity >= 0.8 ? '#ef4444' : settings.sensitivity >= 0.5 ? '#f59e0b' : '#10b981'\n              }}>\n                {settings.sensitivity}\n              </span>\n            </div>\n          </div>\n\n          <div style={{\n            fontSize: '12px',\n            color: '#94a3b8',\n            lineHeight: '1.4',\n            background: 'rgba(0, 0, 0, 0.2)',\n            padding: '8px',\n            borderRadius: '4px'\n          }}>\n            <strong>How it works:</strong><br/>\n            â€¢ <strong>Low (0.1-0.4):</strong> Detects obvious violations only<br/>\n            â€¢ <strong>Medium (0.5-0.7):</strong> Balanced detection (recommended)<br/>\n            â€¢ <strong>High (0.8-1.0):</strong> Detects potential violations aggressively<br/>\n            <em>Higher sensitivity may increase false positives</em>\n          </div>\n        </div>\n\n        {/* Statistics */}\n        <div style={{ \n          display: 'grid', \n          gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))', \n          gap: '12px',\n          marginBottom: '12px'\n        }}>\n          <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#FF3333' }}>{stats.current}</div>\n            <div style={{ fontSize: '12px', opacity: 0.8 }}>Active Violations</div>\n          </div>\n          <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#FFD23F' }}>{stats.last24h}</div>\n            <div style={{ fontSize: '12px', opacity: 0.8 }}>Last 24 Hours</div>\n          </div>\n          <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n            <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#2ED573' }}>{stats.total}</div>\n            <div style={{ fontSize: '12px', opacity: 0.8 }}>Total Detected</div>\n          </div>\n        </div>\n\n        {/* Current Violations */}\n        {violations.length > 0 && (\n          <div style={{ \n            padding: '12px', \n            background: 'rgba(255, 51, 51, 0.2)', \n            borderRadius: '6px',\n            border: '2px solid #FF3333'\n          }}>\n            <h5 style={{ margin: '0 0 8px 0', color: '#FF3333' }}>ðŸš¨ Active Violations</h5>\n            {violations.map((violation, index) => {\n              const config = violationTypes[violation.type];\n              return (\n                <div key={violation.id} style={{ \n                  marginBottom: '8px', \n                  padding: '8px', \n                  background: 'rgba(255,255,255,0.1)', \n                  borderRadius: '4px' \n                }}>\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                    <strong style={{ color: config.color }}>\n                      {config.icon} {config.title}\n                    </strong>\n                    <span style={{ \n                      background: config.color, \n                      color: 'white', \n                      padding: '2px 6px', \n                      borderRadius: '4px', \n                      fontSize: '12px' \n                    }}>\n                      {violation.severity.toUpperCase()}\n                    </span>\n                  </div>\n                  <div style={{ fontSize: '14px', opacity: 0.9, marginTop: '4px' }}>\n                    {config.description}\n                  </div>\n                  <div style={{ fontSize: '12px', opacity: 0.7, marginTop: '4px' }}>\n                    Confidence: {(violation.confidence * 100).toFixed(1)}% |\n                    Time: {new Date(violation.timestamp).toLocaleTimeString()}\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  // Main component with canvas overlay and optional controls\n  return (\n    <div style={{ width: '100%', position: 'relative' }}>\n      {/* Violation Canvas Overlay - Only show if not hiding controls */}\n      {!hideControls && (\n        <canvas\n          ref={violationCanvasRef}\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            pointerEvents: 'none',\n            zIndex: 30,\n            borderRadius: '8px'\n          }}\n        />\n      )}\n\n      {/* Violation Controls - Only show if not hiding controls */}\n      {!hideControls && (\n        <div style={{\n          marginTop: '16px',\n          padding: '16px',\n          background: 'rgba(255,255,255,0.1)',\n          borderRadius: '8px'\n        }}>\n          <h4 style={{ margin: '0 0 12px 0', color: '#fff' }}>ðŸš¨ Violation Detection</h4>\n\n          {/* Include the same settings content here */}\n          <div style={{\n            background: 'rgba(255, 255, 255, 0.05)',\n            padding: '12px',\n            borderRadius: '8px',\n            marginBottom: '16px',\n            border: '1px solid rgba(255, 255, 255, 0.1)'\n          }}>\n            <h4 style={{\n              margin: '0 0 12px 0',\n              color: '#FFD700',\n              fontSize: '14px',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '8px'\n            }}>\n              ðŸš¨ Violation Detection Settings\n            </h4>\n\n            <div style={{ display: 'flex', gap: '20px', marginBottom: '12px', flexWrap: 'wrap', alignItems: 'center' }}>\n              <label style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '8px',\n                cursor: 'pointer',\n                padding: '4px 8px',\n                borderRadius: '4px',\n                background: settings.enabled ? 'rgba(34, 197, 94, 0.2)' : 'rgba(239, 68, 68, 0.2)'\n              }}>\n                <input\n                  type=\"checkbox\"\n                  checked={settings.enabled}\n                  onChange={(e) => setSettings({...settings, enabled: e.target.checked})}\n                />\n                <span style={{ fontWeight: '500' }}>\n                  {settings.enabled ? 'âœ… Detection Active' : 'âŒ Detection Disabled'}\n                </span>\n              </label>\n\n              <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n                <span style={{ fontWeight: '500', minWidth: '80px' }}>Sensitivity:</span>\n                <input\n                  type=\"range\"\n                  min=\"0.1\"\n                  max=\"1.0\"\n                  step=\"0.1\"\n                  value={settings.sensitivity}\n                  onChange={(e) => setSettings({...settings, sensitivity: parseFloat(e.target.value)})}\n                  style={{ width: '120px' }}\n                  disabled={!settings.enabled}\n                />\n                <span style={{\n                  minWidth: '30px',\n                  fontWeight: 'bold',\n                  color: settings.sensitivity >= 0.8 ? '#ef4444' : settings.sensitivity >= 0.5 ? '#f59e0b' : '#10b981'\n                }}>\n                  {settings.sensitivity}\n                </span>\n              </div>\n            </div>\n\n            <div style={{\n              fontSize: '12px',\n              color: '#94a3b8',\n              lineHeight: '1.4',\n              background: 'rgba(0, 0, 0, 0.2)',\n              padding: '8px',\n              borderRadius: '4px'\n            }}>\n              <strong>How it works:</strong><br/>\n              â€¢ <strong>Low (0.1-0.4):</strong> Detects obvious violations only<br/>\n              â€¢ <strong>Medium (0.5-0.7):</strong> Balanced detection (recommended)<br/>\n              â€¢ <strong>High (0.8-1.0):</strong> Detects potential violations aggressively<br/>\n              <em>Higher sensitivity may increase false positives</em>\n            </div>\n          </div>\n\n          {/* Statistics */}\n          <div style={{\n            display: 'grid',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(120px, 1fr))',\n            gap: '12px',\n            marginBottom: '12px'\n          }}>\n            <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#FF3333' }}>{stats.current}</div>\n              <div style={{ fontSize: '12px', opacity: 0.8 }}>Active Violations</div>\n            </div>\n            <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#FFD23F' }}>{stats.last24h}</div>\n              <div style={{ fontSize: '12px', opacity: 0.8 }}>Last 24 Hours</div>\n            </div>\n            <div style={{ textAlign: 'center', padding: '8px', background: 'rgba(255,255,255,0.1)', borderRadius: '6px' }}>\n              <div style={{ fontSize: '24px', fontWeight: 'bold', color: '#2ED573' }}>{stats.total}</div>\n              <div style={{ fontSize: '12px', opacity: 0.8 }}>Total Detected</div>\n            </div>\n          </div>\n\n          {/* Current Violations */}\n          {violations.length > 0 && (\n            <div style={{\n              padding: '12px',\n              background: 'rgba(255, 51, 51, 0.2)',\n              borderRadius: '6px',\n              border: '2px solid #FF3333'\n            }}>\n              <h5 style={{ margin: '0 0 8px 0', color: '#FF3333' }}>ðŸš¨ Active Violations</h5>\n              {violations.map((violation, index) => {\n                const config = violationTypes[violation.type];\n                return (\n                  <div key={violation.id} style={{\n                    marginBottom: '8px',\n                    padding: '8px',\n                    background: 'rgba(255,255,255,0.1)',\n                    borderRadius: '4px'\n                  }}>\n                    <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                      <strong style={{ color: config.color }}>\n                        {config.icon} {config.title}\n                      </strong>\n                      <span style={{\n                        background: config.color,\n                        color: 'white',\n                        padding: '2px 6px',\n                        borderRadius: '4px',\n                        fontSize: '12px'\n                      }}>\n                        {violation.severity.toUpperCase()}\n                      </span>\n                    </div>\n                    <div style={{ fontSize: '14px', opacity: 0.9, marginTop: '4px' }}>\n                      {config.description}\n                    </div>\n                    <div style={{ fontSize: '12px', opacity: 0.7, marginTop: '4px' }}>\n                      Confidence: {(violation.confidence * 100).toFixed(1)}% |\n                      Time: {new Date(violation.timestamp).toLocaleTimeString()}\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ViolationDetector;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}