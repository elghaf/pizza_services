{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ayoub\\\\OneDrive\\\\Desktop\\\\eagleAI\\\\pizza_store_detection\\\\services\\\\frontend\\\\src\\\\components\\\\VideoProcessor\\\\ViolationControls.js\",\n  _s = $RefreshSig$();\n/**\n * ViolationControls - Component for violation detection settings and controls\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { analyzePizzaStoreViolations, getPizzaStoreViolationStats } from '../ViolationDetector/utils/PizzaStoreViolationAnalysis';\nimport databaseClient from '../../utils/DatabaseClient';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ViolationControls = ({\n  detections,\n  zones,\n  frameWidth,\n  frameHeight,\n  onViolationDetected\n}) => {\n  _s();\n  const [sensitivity, setSensitivity] = useState(0.7);\n  const [enabledViolationTypes, setEnabledViolationTypes] = useState({\n    scooper_missing: true,\n    hand_contact: true,\n    cross_contamination: true,\n    improper_handling: true\n  });\n  const [autoDetection, setAutoDetection] = useState(true);\n  const [detectionInterval, setDetectionInterval] = useState(2000); // ms\n  const [usePizzaStoreLogic, setUsePizzaStoreLogic] = useState(true);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [frameCounter, setFrameCounter] = useState(0);\n\n  // Hand tracking for pizza store logic\n  const handTrackingRef = React.useRef(new Map());\n\n  // Auto-detection logic\n  useEffect(() => {\n    if (!autoDetection || !detections.length || !zones.length) return;\n    const interval = setInterval(() => {\n      checkForViolations();\n    }, detectionInterval);\n    return () => clearInterval(interval);\n  }, [autoDetection, detections, zones, sensitivity, enabledViolationTypes, detectionInterval]);\n\n  // Point-in-polygon algorithm for polygon zone detection\n  const isPointInPolygon = (point, polygon) => {\n    const x = point.x;\n    const y = point.y;\n    let inside = false;\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      const xi = polygon[i].x;\n      const yi = polygon[i].y;\n      const xj = polygon[j].x;\n      const yj = polygon[j].y;\n      if (yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  };\n\n  // Check if detection is in zone (supports both rectangle and polygon)\n  const isDetectionInZone = (detection, zone) => {\n    var _zone$points;\n    const center = detection.center || {\n      x: (detection.bbox.x1 + detection.bbox.x2) / 2,\n      y: (detection.bbox.y1 + detection.bbox.y2) / 2\n    };\n    console.log(`🔍 Checking detection ${detection.class_name} in zone ${zone.name}:`, {\n      center,\n      zoneShape: zone.shape,\n      zonePointsCount: (_zone$points = zone.points) === null || _zone$points === void 0 ? void 0 : _zone$points.length,\n      zonePoints: zone.points\n    });\n    if (zone.shape === 'polygon' && zone.points && zone.points.length >= 3) {\n      // For polygon zones, use point-in-polygon algorithm\n      const result = isPointInPolygon(center, zone.points);\n      console.log(`🔺 Polygon detection result for ${detection.class_name} in ${zone.name}:`, result);\n      return result;\n    } else if (zone.points && zone.points.length === 2) {\n      // For rectangle zones stored as points\n      const [p1, p2] = zone.points;\n      const minX = Math.min(p1.x, p2.x);\n      const maxX = Math.max(p1.x, p2.x);\n      const minY = Math.min(p1.y, p2.y);\n      const maxY = Math.max(p1.y, p2.y);\n      return center.x >= minX && center.x <= maxX && center.y >= minY && center.y <= maxY;\n    } else if (zone.x !== undefined && zone.width !== undefined) {\n      // Legacy rectangle format\n      const scaledX = center.x / frameWidth * 100;\n      const scaledY = center.y / frameHeight * 100;\n      return scaledX >= zone.x && scaledX <= zone.x + zone.width && scaledY >= zone.y && scaledY <= zone.y + zone.height;\n    }\n    return false;\n  };\n  const checkForViolations = () => {\n    console.log('🔍 Checking for violations:', {\n      zonesCount: zones.length,\n      detectionsCount: detections.length,\n      usePizzaStoreLogic: usePizzaStoreLogic,\n      zones: zones.map(z => {\n        var _z$points;\n        return {\n          id: z.id,\n          name: z.name,\n          shape: z.shape,\n          pointsCount: (_z$points = z.points) === null || _z$points === void 0 ? void 0 : _z$points.length,\n          requiresScooper: z.requiresScooper,\n          requires_scooper: z.requires_scooper\n        };\n      })\n    });\n    let newViolations = [];\n    if (usePizzaStoreLogic) {\n      // Use enhanced pizza store violation analysis\n      console.log('🍕 Using Pizza Store violation analysis');\n      newViolations = analyzePizzaStoreViolations(detections, zones, settings, handTrackingRef);\n\n      // Save violations to database\n      if (currentSessionId && newViolations.length > 0) {\n        const currentFrame = frameCounter + 1;\n        setFrameCounter(currentFrame);\n        newViolations.forEach(async violation => {\n          try {\n            await databaseClient.saveViolation(currentSessionId, {\n              ...violation,\n              frameNumber: currentFrame\n            });\n            console.log('📊 Pizza store violation saved to database:', violation.type);\n          } catch (error) {\n            console.error('❌ Failed to save violation to database:', error);\n          }\n        });\n      }\n    } else {\n      // Use legacy violation detection\n      console.log('🔧 Using legacy violation analysis');\n      zones.forEach(zone => {\n        if (!zone.requires_scooper && !zone.requiresScooper) {\n          console.log(`⏭️ Skipping zone ${zone.name} - no scooper requirement`);\n          return;\n        }\n        console.log(`🎯 Checking zone: ${zone.name} (${zone.shape})`);\n\n        // Find detections in this zone using the enhanced detection method\n        const detectionsInZone = detections.filter(detection => {\n          const inZone = isDetectionInZone(detection, zone);\n          if (inZone) {\n            console.log(`✅ Detection ${detection.class_name} found in zone ${zone.name}`);\n          }\n          return inZone;\n        });\n\n        // Legacy violation detection logic\n        if (enabledViolationTypes.scooper_missing) {\n          const hands = detectionsInZone.filter(d => {\n            var _ref, _ref2;\n            return ((_ref = d.class_name || d.class) === null || _ref === void 0 ? void 0 : _ref.toLowerCase().includes('hand')) || ((_ref2 = d.class_name || d.class) === null || _ref2 === void 0 ? void 0 : _ref2.toLowerCase().includes('person'));\n          });\n          const scoopers = detectionsInZone.filter(d => {\n            var _ref3, _ref4, _ref5;\n            return ((_ref3 = d.class_name || d.class) === null || _ref3 === void 0 ? void 0 : _ref3.toLowerCase().includes('spoon')) || ((_ref4 = d.class_name || d.class) === null || _ref4 === void 0 ? void 0 : _ref4.toLowerCase().includes('utensil')) || ((_ref5 = d.class_name || d.class) === null || _ref5 === void 0 ? void 0 : _ref5.toLowerCase().includes('scooper'));\n          });\n          if (hands.length > 0 && scoopers.length === 0 && Math.random() > 1 - sensitivity) {\n            onViolationDetected({\n              type: 'Scooper Missing',\n              description: `Hand detected in ${zone.name} without required scooper`,\n              severity: 'high',\n              timestamp: new Date().toISOString(),\n              location: zone.name,\n              zone_id: zone.id,\n              confidence: sensitivity,\n              worker_id: `W${Math.floor(Math.random() * 100)}`\n            });\n          }\n        }\n\n        // Check for hand contact violations\n        if (enabledViolationTypes.hand_contact) {\n          const directContact = detectionsInZone.filter(d => {\n            var _ref6;\n            const className = (_ref6 = d.class_name || d.class) === null || _ref6 === void 0 ? void 0 : _ref6.toLowerCase();\n            return (className === null || className === void 0 ? void 0 : className.includes('hand')) && d.confidence > sensitivity;\n          });\n          if (directContact.length > 0 && Math.random() > 0.8) {\n            onViolationDetected({\n              type: 'Direct Hand Contact',\n              description: `Direct hand contact detected with ${zone.ingredient_type}`,\n              severity: 'critical',\n              timestamp: new Date().toISOString(),\n              location: zone.name,\n              zone_id: zone.id,\n              confidence: directContact[0].confidence,\n              worker_id: `W${Math.floor(Math.random() * 100)}`\n            });\n          }\n        }\n      });\n    }\n\n    // Handle violations (both pizza store and legacy)\n    if (newViolations.length > 0) {\n      console.log(`🚨 ${newViolations.length} violations detected`);\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n      });\n    }\n  };\n  const getSensitivityLevel = value => {\n    if (value >= 0.8) return {\n      level: 'Very High',\n      color: '#ef4444',\n      description: 'Maximum detection, may include false positives'\n    };\n    if (value >= 0.6) return {\n      level: 'High',\n      color: '#f59e0b',\n      description: 'Strict detection, recommended for compliance'\n    };\n    if (value >= 0.4) return {\n      level: 'Medium',\n      color: '#eab308',\n      description: 'Balanced detection, good for training'\n    };\n    if (value >= 0.2) return {\n      level: 'Low',\n      color: '#22c55e',\n      description: 'Lenient detection, fewer alerts'\n    };\n    return {\n      level: 'Very Low',\n      color: '#6b7280',\n      description: 'Minimal detection, testing only'\n    };\n  };\n  const sensitivityInfo = getSensitivityLevel(sensitivity);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"card-title\",\n        children: \"\\u2699\\uFE0F Violation Detection Settings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 'bold',\n              color: '#4a90e2'\n            },\n            children: \"\\uD83E\\uDD16 Automatic Detection\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setAutoDetection(!autoDetection),\n            style: {\n              padding: '6px 12px',\n              background: autoDetection ? '#00FF88' : '#666',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontWeight: 'bold'\n            },\n            children: autoDetection ? 'ON' : 'OFF'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px',\n            color: '#888',\n            margin: 0\n          },\n          children: \"Automatically detect violations in real-time during video processing\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: 'bold',\n            color: '#4a90e2'\n          },\n          children: [\"\\uD83C\\uDFAF Detection Sensitivity: \", (sensitivity * 100).toFixed(0), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"0.1\",\n          max: \"1.0\",\n          step: \"0.1\",\n          value: sensitivity,\n          onChange: e => setSensitivity(parseFloat(e.target.value)),\n          style: {\n            width: '100%',\n            marginBottom: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '8px 12px',\n            background: `${sensitivityInfo.color}20`,\n            borderRadius: '6px',\n            border: `1px solid ${sensitivityInfo.color}50`\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              color: sensitivityInfo.color,\n              fontWeight: 'bold',\n              marginBottom: '4px'\n            },\n            children: [sensitivityInfo.level, \" Sensitivity\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '14px',\n              color: '#ccc'\n            },\n            children: sensitivityInfo.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this), autoDetection && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '8px',\n            fontWeight: 'bold',\n            color: '#4a90e2'\n          },\n          children: [\"\\u23F1\\uFE0F Detection Interval: \", detectionInterval / 1000, \"s\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"range\",\n          min: \"500\",\n          max: \"5000\",\n          step: \"500\",\n          value: detectionInterval,\n          onChange: e => setDetectionInterval(parseInt(e.target.value)),\n          style: {\n            width: '100%',\n            marginBottom: '8px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '14px',\n            color: '#888'\n          },\n          children: \"How often to check for violations (0.5s - 5s)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center',\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              fontWeight: 'bold',\n              color: '#4a90e2'\n            },\n            children: \"\\uD83C\\uDF55 Pizza Store Enhanced Logic\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setUsePizzaStoreLogic(!usePizzaStoreLogic),\n            style: {\n              padding: '6px 12px',\n              background: usePizzaStoreLogic ? '#FF6B35' : '#666',\n              color: 'white',\n              border: 'none',\n              borderRadius: '4px',\n              cursor: 'pointer',\n              fontWeight: 'bold'\n            },\n            children: usePizzaStoreLogic ? 'ENHANCED' : 'LEGACY'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: '14px',\n            color: '#888',\n            margin: 0\n          },\n          children: usePizzaStoreLogic ? 'Advanced pizza store violation detection with movement analysis and cross-contamination detection' : 'Basic violation detection using simple zone-based rules'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '12px',\n            color: '#4a90e2'\n          },\n          children: \"\\uD83D\\uDEA8 Violation Types\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'grid',\n            gap: '12px'\n          },\n          children: Object.entries(enabledViolationTypes).map(([type, enabled]) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              padding: '12px',\n              background: 'rgba(255,255,255,0.05)',\n              borderRadius: '6px',\n              border: `1px solid ${enabled ? '#00FF88' : '#666'}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontWeight: 'bold',\n                  color: enabled ? '#00FF88' : '#888'\n                },\n                children: type.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: '12px',\n                  color: '#888'\n                },\n                children: [type === 'scooper_missing' && 'Detect when hands are in ingredient zones without scoopers', type === 'hand_contact' && 'Detect direct hand contact with food ingredients', type === 'cross_contamination' && 'Detect potential cross-contamination between zones', type === 'improper_handling' && 'Detect improper food handling techniques']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setEnabledViolationTypes(prev => ({\n                ...prev,\n                [type]: !prev[type]\n              })),\n              style: {\n                padding: '6px 12px',\n                background: enabled ? '#00FF88' : '#666',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontWeight: 'bold'\n              },\n              children: enabled ? 'ON' : 'OFF'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 17\n            }, this)]\n          }, type, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: checkForViolations,\n          style: {\n            width: '100%',\n            padding: '12px',\n            background: '#4a90e2',\n            color: 'white',\n            border: 'none',\n            borderRadius: '6px',\n            cursor: 'pointer',\n            fontSize: '16px',\n            fontWeight: 'bold'\n          },\n          children: \"\\uD83D\\uDD0D Check for Violations Now\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 403,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '12px',\n          background: 'rgba(255,255,255,0.05)',\n          borderRadius: '6px',\n          fontSize: '14px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83C\\uDFAF Active Zones:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), \" \", zones.filter(z => z.requires_scooper).length, \" of \", zones.length]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 429,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDD0D Current Detections:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this), \" \", detections.length, \" objects\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '4px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u2699\\uFE0F Auto Detection:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), \" \", autoDetection ? 'Enabled' : 'Disabled']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 435,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83C\\uDFAF Sensitivity:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this), \" \", sensitivityInfo.level, \" (\", (sensitivity * 100).toFixed(0), \"%)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 241,\n    columnNumber: 5\n  }, this);\n};\n_s(ViolationControls, \"rTFIAJWJa5RjR0L/aHi9Z1LZV5A=\");\n_c = ViolationControls;\nexport default ViolationControls;\nvar _c;\n$RefreshReg$(_c, \"ViolationControls\");","map":{"version":3,"names":["React","useState","useEffect","analyzePizzaStoreViolations","getPizzaStoreViolationStats","databaseClient","jsxDEV","_jsxDEV","ViolationControls","detections","zones","frameWidth","frameHeight","onViolationDetected","_s","sensitivity","setSensitivity","enabledViolationTypes","setEnabledViolationTypes","scooper_missing","hand_contact","cross_contamination","improper_handling","autoDetection","setAutoDetection","detectionInterval","setDetectionInterval","usePizzaStoreLogic","setUsePizzaStoreLogic","currentSessionId","setCurrentSessionId","frameCounter","setFrameCounter","handTrackingRef","useRef","Map","length","interval","setInterval","checkForViolations","clearInterval","isPointInPolygon","point","polygon","x","y","inside","i","j","xi","yi","xj","yj","isDetectionInZone","detection","zone","_zone$points","center","bbox","x1","x2","y1","y2","console","log","class_name","name","zoneShape","shape","zonePointsCount","points","zonePoints","result","p1","p2","minX","Math","min","maxX","max","minY","maxY","undefined","width","scaledX","scaledY","height","zonesCount","detectionsCount","map","z","_z$points","id","pointsCount","requiresScooper","requires_scooper","newViolations","settings","currentFrame","forEach","violation","saveViolation","frameNumber","type","error","detectionsInZone","filter","inZone","hands","d","_ref","_ref2","class","toLowerCase","includes","scoopers","_ref3","_ref4","_ref5","random","description","severity","timestamp","Date","toISOString","location","zone_id","confidence","worker_id","floor","directContact","_ref6","className","ingredient_type","getSensitivityLevel","value","level","color","sensitivityInfo","children","fileName","_jsxFileName","lineNumber","columnNumber","style","marginBottom","display","justifyContent","alignItems","fontWeight","onClick","padding","background","border","borderRadius","cursor","fontSize","margin","toFixed","step","onChange","e","parseFloat","target","parseInt","gap","Object","entries","enabled","split","word","charAt","toUpperCase","slice","join","prev","_c","$RefreshReg$"],"sources":["C:/Users/ayoub/OneDrive/Desktop/eagleAI/pizza_store_detection/services/frontend/src/components/VideoProcessor/ViolationControls.js"],"sourcesContent":["/**\n * ViolationControls - Component for violation detection settings and controls\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { analyzePizzaStoreViolations, getPizzaStoreViolationStats } from '../ViolationDetector/utils/PizzaStoreViolationAnalysis';\nimport databaseClient from '../../utils/DatabaseClient';\n\nconst ViolationControls = ({ \n  detections, \n  zones, \n  frameWidth, \n  frameHeight, \n  onViolationDetected \n}) => {\n  const [sensitivity, setSensitivity] = useState(0.7);\n  const [enabledViolationTypes, setEnabledViolationTypes] = useState({\n    scooper_missing: true,\n    hand_contact: true,\n    cross_contamination: true,\n    improper_handling: true\n  });\n  const [autoDetection, setAutoDetection] = useState(true);\n  const [detectionInterval, setDetectionInterval] = useState(2000); // ms\n  const [usePizzaStoreLogic, setUsePizzaStoreLogic] = useState(true);\n  const [currentSessionId, setCurrentSessionId] = useState(null);\n  const [frameCounter, setFrameCounter] = useState(0);\n\n  // Hand tracking for pizza store logic\n  const handTrackingRef = React.useRef(new Map());\n\n  // Auto-detection logic\n  useEffect(() => {\n    if (!autoDetection || !detections.length || !zones.length) return;\n\n    const interval = setInterval(() => {\n      checkForViolations();\n    }, detectionInterval);\n\n    return () => clearInterval(interval);\n  }, [autoDetection, detections, zones, sensitivity, enabledViolationTypes, detectionInterval]);\n\n  // Point-in-polygon algorithm for polygon zone detection\n  const isPointInPolygon = (point, polygon) => {\n    const x = point.x;\n    const y = point.y;\n    let inside = false;\n\n    for (let i = 0, j = polygon.length - 1; i < polygon.length; j = i++) {\n      const xi = polygon[i].x;\n      const yi = polygon[i].y;\n      const xj = polygon[j].x;\n      const yj = polygon[j].y;\n\n      if (((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi)) {\n        inside = !inside;\n      }\n    }\n\n    return inside;\n  };\n\n  // Check if detection is in zone (supports both rectangle and polygon)\n  const isDetectionInZone = (detection, zone) => {\n    const center = detection.center || {\n      x: (detection.bbox.x1 + detection.bbox.x2) / 2,\n      y: (detection.bbox.y1 + detection.bbox.y2) / 2\n    };\n\n    console.log(`🔍 Checking detection ${detection.class_name} in zone ${zone.name}:`, {\n      center,\n      zoneShape: zone.shape,\n      zonePointsCount: zone.points?.length,\n      zonePoints: zone.points\n    });\n\n    if (zone.shape === 'polygon' && zone.points && zone.points.length >= 3) {\n      // For polygon zones, use point-in-polygon algorithm\n      const result = isPointInPolygon(center, zone.points);\n      console.log(`🔺 Polygon detection result for ${detection.class_name} in ${zone.name}:`, result);\n      return result;\n    } else if (zone.points && zone.points.length === 2) {\n      // For rectangle zones stored as points\n      const [p1, p2] = zone.points;\n      const minX = Math.min(p1.x, p2.x);\n      const maxX = Math.max(p1.x, p2.x);\n      const minY = Math.min(p1.y, p2.y);\n      const maxY = Math.max(p1.y, p2.y);\n\n      return (\n        center.x >= minX && center.x <= maxX &&\n        center.y >= minY && center.y <= maxY\n      );\n    } else if (zone.x !== undefined && zone.width !== undefined) {\n      // Legacy rectangle format\n      const scaledX = (center.x / frameWidth) * 100;\n      const scaledY = (center.y / frameHeight) * 100;\n\n      return (\n        scaledX >= zone.x &&\n        scaledX <= zone.x + zone.width &&\n        scaledY >= zone.y &&\n        scaledY <= zone.y + zone.height\n      );\n    }\n\n    return false;\n  };\n\n  const checkForViolations = () => {\n    console.log('🔍 Checking for violations:', {\n      zonesCount: zones.length,\n      detectionsCount: detections.length,\n      usePizzaStoreLogic: usePizzaStoreLogic,\n      zones: zones.map(z => ({\n        id: z.id,\n        name: z.name,\n        shape: z.shape,\n        pointsCount: z.points?.length,\n        requiresScooper: z.requiresScooper,\n        requires_scooper: z.requires_scooper\n      }))\n    });\n\n    let newViolations = [];\n\n    if (usePizzaStoreLogic) {\n      // Use enhanced pizza store violation analysis\n      console.log('🍕 Using Pizza Store violation analysis');\n      newViolations = analyzePizzaStoreViolations(detections, zones, settings, handTrackingRef);\n\n      // Save violations to database\n      if (currentSessionId && newViolations.length > 0) {\n        const currentFrame = frameCounter + 1;\n        setFrameCounter(currentFrame);\n\n        newViolations.forEach(async (violation) => {\n          try {\n            await databaseClient.saveViolation(currentSessionId, {\n              ...violation,\n              frameNumber: currentFrame\n            });\n            console.log('📊 Pizza store violation saved to database:', violation.type);\n          } catch (error) {\n            console.error('❌ Failed to save violation to database:', error);\n          }\n        });\n      }\n    } else {\n      // Use legacy violation detection\n      console.log('🔧 Using legacy violation analysis');\n      zones.forEach(zone => {\n        if (!zone.requires_scooper && !zone.requiresScooper) {\n          console.log(`⏭️ Skipping zone ${zone.name} - no scooper requirement`);\n          return;\n        }\n\n        console.log(`🎯 Checking zone: ${zone.name} (${zone.shape})`);\n\n        // Find detections in this zone using the enhanced detection method\n        const detectionsInZone = detections.filter(detection => {\n          const inZone = isDetectionInZone(detection, zone);\n          if (inZone) {\n            console.log(`✅ Detection ${detection.class_name} found in zone ${zone.name}`);\n          }\n          return inZone;\n        });\n\n        // Legacy violation detection logic\n        if (enabledViolationTypes.scooper_missing) {\n        const hands = detectionsInZone.filter(d => \n          (d.class_name || d.class)?.toLowerCase().includes('hand') ||\n          (d.class_name || d.class)?.toLowerCase().includes('person')\n        );\n        \n        const scoopers = detectionsInZone.filter(d => \n          (d.class_name || d.class)?.toLowerCase().includes('spoon') ||\n          (d.class_name || d.class)?.toLowerCase().includes('utensil') ||\n          (d.class_name || d.class)?.toLowerCase().includes('scooper')\n        );\n\n        if (hands.length > 0 && scoopers.length === 0 && Math.random() > (1 - sensitivity)) {\n          onViolationDetected({\n            type: 'Scooper Missing',\n            description: `Hand detected in ${zone.name} without required scooper`,\n            severity: 'high',\n            timestamp: new Date().toISOString(),\n            location: zone.name,\n            zone_id: zone.id,\n            confidence: sensitivity,\n            worker_id: `W${Math.floor(Math.random() * 100)}`\n          });\n        }\n      }\n\n      // Check for hand contact violations\n      if (enabledViolationTypes.hand_contact) {\n        const directContact = detectionsInZone.filter(d => {\n          const className = (d.class_name || d.class)?.toLowerCase();\n          return className?.includes('hand') && d.confidence > sensitivity;\n        });\n\n        if (directContact.length > 0 && Math.random() > 0.8) {\n          onViolationDetected({\n            type: 'Direct Hand Contact',\n            description: `Direct hand contact detected with ${zone.ingredient_type}`,\n            severity: 'critical',\n            timestamp: new Date().toISOString(),\n            location: zone.name,\n            zone_id: zone.id,\n            confidence: directContact[0].confidence,\n            worker_id: `W${Math.floor(Math.random() * 100)}`\n          });\n        }\n        }\n      });\n    }\n\n    // Handle violations (both pizza store and legacy)\n    if (newViolations.length > 0) {\n      console.log(`🚨 ${newViolations.length} violations detected`);\n      newViolations.forEach(violation => {\n        if (onViolationDetected) {\n          onViolationDetected(violation);\n        }\n      });\n    }\n  };\n\n  const getSensitivityLevel = (value) => {\n    if (value >= 0.8) return { level: 'Very High', color: '#ef4444', description: 'Maximum detection, may include false positives' };\n    if (value >= 0.6) return { level: 'High', color: '#f59e0b', description: 'Strict detection, recommended for compliance' };\n    if (value >= 0.4) return { level: 'Medium', color: '#eab308', description: 'Balanced detection, good for training' };\n    if (value >= 0.2) return { level: 'Low', color: '#22c55e', description: 'Lenient detection, fewer alerts' };\n    return { level: 'Very Low', color: '#6b7280', description: 'Minimal detection, testing only' };\n  };\n\n  const sensitivityInfo = getSensitivityLevel(sensitivity);\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h2 className=\"card-title\">⚙️ Violation Detection Settings</h2>\n      </div>\n      <div className=\"card-content\">\n        \n        {/* Auto Detection Toggle */}\n        <div style={{ marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n            <label style={{ fontWeight: 'bold', color: '#4a90e2' }}>\n              🤖 Automatic Detection\n            </label>\n            <button\n              onClick={() => setAutoDetection(!autoDetection)}\n              style={{\n                padding: '6px 12px',\n                background: autoDetection ? '#00FF88' : '#666',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontWeight: 'bold'\n              }}\n            >\n              {autoDetection ? 'ON' : 'OFF'}\n            </button>\n          </div>\n          <p style={{ fontSize: '14px', color: '#888', margin: 0 }}>\n            Automatically detect violations in real-time during video processing\n          </p>\n        </div>\n\n        {/* Sensitivity Control */}\n        <div style={{ marginBottom: '20px' }}>\n          <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold', color: '#4a90e2' }}>\n            🎯 Detection Sensitivity: {(sensitivity * 100).toFixed(0)}%\n          </label>\n          <input\n            type=\"range\"\n            min=\"0.1\"\n            max=\"1.0\"\n            step=\"0.1\"\n            value={sensitivity}\n            onChange={(e) => setSensitivity(parseFloat(e.target.value))}\n            style={{ width: '100%', marginBottom: '8px' }}\n          />\n          <div style={{\n            padding: '8px 12px',\n            background: `${sensitivityInfo.color}20`,\n            borderRadius: '6px',\n            border: `1px solid ${sensitivityInfo.color}50`\n          }}>\n            <div style={{ color: sensitivityInfo.color, fontWeight: 'bold', marginBottom: '4px' }}>\n              {sensitivityInfo.level} Sensitivity\n            </div>\n            <div style={{ fontSize: '14px', color: '#ccc' }}>\n              {sensitivityInfo.description}\n            </div>\n          </div>\n        </div>\n\n        {/* Detection Interval */}\n        {autoDetection && (\n          <div style={{ marginBottom: '20px' }}>\n            <label style={{ display: 'block', marginBottom: '8px', fontWeight: 'bold', color: '#4a90e2' }}>\n              ⏱️ Detection Interval: {detectionInterval / 1000}s\n            </label>\n            <input\n              type=\"range\"\n              min=\"500\"\n              max=\"5000\"\n              step=\"500\"\n              value={detectionInterval}\n              onChange={(e) => setDetectionInterval(parseInt(e.target.value))}\n              style={{ width: '100%', marginBottom: '8px' }}\n            />\n            <div style={{ fontSize: '14px', color: '#888' }}>\n              How often to check for violations (0.5s - 5s)\n            </div>\n          </div>\n        )}\n\n        {/* Pizza Store Logic Toggle */}\n        <div style={{ marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n            <label style={{ fontWeight: 'bold', color: '#4a90e2' }}>\n              🍕 Pizza Store Enhanced Logic\n            </label>\n            <button\n              onClick={() => setUsePizzaStoreLogic(!usePizzaStoreLogic)}\n              style={{\n                padding: '6px 12px',\n                background: usePizzaStoreLogic ? '#FF6B35' : '#666',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: 'pointer',\n                fontWeight: 'bold'\n              }}\n            >\n              {usePizzaStoreLogic ? 'ENHANCED' : 'LEGACY'}\n            </button>\n          </div>\n          <p style={{ fontSize: '14px', color: '#888', margin: 0 }}>\n            {usePizzaStoreLogic\n              ? 'Advanced pizza store violation detection with movement analysis and cross-contamination detection'\n              : 'Basic violation detection using simple zone-based rules'\n            }\n          </p>\n        </div>\n\n        {/* Violation Types */}\n        <div style={{ marginBottom: '20px' }}>\n          <h3 style={{ marginBottom: '12px', color: '#4a90e2' }}>🚨 Violation Types</h3>\n          <div style={{ display: 'grid', gap: '12px' }}>\n            {Object.entries(enabledViolationTypes).map(([type, enabled]) => (\n              <div\n                key={type}\n                style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  padding: '12px',\n                  background: 'rgba(255,255,255,0.05)',\n                  borderRadius: '6px',\n                  border: `1px solid ${enabled ? '#00FF88' : '#666'}`\n                }}\n              >\n                <div>\n                  <div style={{ fontWeight: 'bold', color: enabled ? '#00FF88' : '#888' }}>\n                    {type.split('_').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ')}\n                  </div>\n                  <div style={{ fontSize: '12px', color: '#888' }}>\n                    {type === 'scooper_missing' && 'Detect when hands are in ingredient zones without scoopers'}\n                    {type === 'hand_contact' && 'Detect direct hand contact with food ingredients'}\n                    {type === 'cross_contamination' && 'Detect potential cross-contamination between zones'}\n                    {type === 'improper_handling' && 'Detect improper food handling techniques'}\n                  </div>\n                </div>\n                <button\n                  onClick={() => setEnabledViolationTypes(prev => ({\n                    ...prev,\n                    [type]: !prev[type]\n                  }))}\n                  style={{\n                    padding: '6px 12px',\n                    background: enabled ? '#00FF88' : '#666',\n                    color: 'white',\n                    border: 'none',\n                    borderRadius: '4px',\n                    cursor: 'pointer',\n                    fontWeight: 'bold'\n                  }}\n                >\n                  {enabled ? 'ON' : 'OFF'}\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Manual Detection Button */}\n        <div style={{ marginBottom: '20px' }}>\n          <button\n            onClick={checkForViolations}\n            style={{\n              width: '100%',\n              padding: '12px',\n              background: '#4a90e2',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: 'pointer',\n              fontSize: '16px',\n              fontWeight: 'bold'\n            }}\n          >\n            🔍 Check for Violations Now\n          </button>\n        </div>\n\n        {/* Status Information */}\n        <div style={{\n          padding: '12px',\n          background: 'rgba(255,255,255,0.05)',\n          borderRadius: '6px',\n          fontSize: '14px'\n        }}>\n          <div style={{ marginBottom: '4px' }}>\n            <strong>🎯 Active Zones:</strong> {zones.filter(z => z.requires_scooper).length} of {zones.length}\n          </div>\n          <div style={{ marginBottom: '4px' }}>\n            <strong>🔍 Current Detections:</strong> {detections.length} objects\n          </div>\n          <div style={{ marginBottom: '4px' }}>\n            <strong>⚙️ Auto Detection:</strong> {autoDetection ? 'Enabled' : 'Disabled'}\n          </div>\n          <div>\n            <strong>🎯 Sensitivity:</strong> {sensitivityInfo.level} ({(sensitivity * 100).toFixed(0)}%)\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ViolationControls;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}