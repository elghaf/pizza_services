{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ayoub\\\\OneDrive\\\\Desktop\\\\eagleAI\\\\pizza_store_detection\\\\services\\\\frontend\\\\src\\\\components\\\\ROIZoneManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ROIZoneManager = ({\n  currentFrame,\n  onZonesUpdate,\n  existingZones = [],\n  isEnabled = true,\n  frameWidth = 640,\n  frameHeight = 480\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  const [zones, setZones] = useState(existingZones);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentZone, setCurrentZone] = useState(null);\n  const [selectedZoneType, setSelectedZoneType] = useState('sauce_area');\n  const [editingZone, setEditingZone] = useState(null);\n  const [showZones, setShowZones] = useState(true);\n\n  // Zone types with professional configuration\n  const zoneTypes = {\n    sauce_area: {\n      name: 'Sauce Area',\n      color: '#FF6B35',\n      fillColor: 'rgba(255, 107, 53, 0.2)',\n      requiresScooper: true,\n      icon: '🍅',\n      description: 'Sauce dispensing and handling area'\n    },\n    cheese_area: {\n      name: 'Cheese Area',\n      color: '#FFD23F',\n      fillColor: 'rgba(255, 210, 63, 0.2)',\n      requiresScooper: true,\n      icon: '🧀',\n      description: 'Cheese container and handling area'\n    },\n    meat_area: {\n      name: 'Meat/Protein Area',\n      color: '#FF4757',\n      fillColor: 'rgba(255, 71, 87, 0.2)',\n      requiresScooper: true,\n      icon: '🥓',\n      description: 'Meat and protein ingredient area'\n    },\n    vegetable_area: {\n      name: 'Vegetable Area',\n      color: '#2ED573',\n      fillColor: 'rgba(46, 213, 115, 0.2)',\n      requiresScooper: true,\n      icon: '🥬',\n      description: 'Vegetable and fresh ingredient area'\n    },\n    prep_surface: {\n      name: 'Prep Surface',\n      color: '#5352ED',\n      fillColor: 'rgba(83, 82, 237, 0.2)',\n      requiresScooper: false,\n      icon: '🍕',\n      description: 'Pizza preparation surface (no scooper required)'\n    },\n    cleaning_area: {\n      name: 'Cleaning Area',\n      color: '#00D2D3',\n      fillColor: 'rgba(0, 210, 211, 0.2)',\n      requiresScooper: false,\n      icon: '🧽',\n      description: 'Cleaning and sanitization area'\n    }\n  };\n  useEffect(() => {\n    if (onZonesUpdate) {\n      onZonesUpdate(zones);\n    }\n  }, [zones, onZonesUpdate]);\n  useEffect(() => {\n    drawZones();\n  }, [zones, currentFrame, showZones, frameWidth, frameHeight]);\n  const getCanvasCoordinates = event => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n    return {\n      x: (event.clientX - rect.left) * scaleX,\n      y: (event.clientY - rect.top) * scaleY\n    };\n  };\n  const handleMouseDown = event => {\n    if (!isEnabled) return;\n    const coords = getCanvasCoordinates(event);\n\n    // Check if clicking on existing zone for editing\n    const clickedZone = findZoneAtPoint(coords.x, coords.y);\n    if (clickedZone) {\n      setEditingZone(clickedZone);\n      return;\n    }\n\n    // Start drawing new zone\n    setIsDrawing(true);\n    setCurrentZone({\n      id: `zone_${Date.now()}`,\n      type: selectedZoneType,\n      points: [coords],\n      isComplete: false\n    });\n  };\n  const handleMouseMove = event => {\n    if (!isDrawing || !currentZone) return;\n    const coords = getCanvasCoordinates(event);\n\n    // Update current zone with new point for rectangle drawing\n    if (currentZone.points.length === 1) {\n      const updatedZone = {\n        ...currentZone,\n        points: [currentZone.points[0], coords]\n      };\n      setCurrentZone(updatedZone);\n      drawZones([...zones, updatedZone]);\n    }\n  };\n  const handleMouseUp = event => {\n    if (!isDrawing || !currentZone) return;\n    const coords = getCanvasCoordinates(event);\n\n    // Complete rectangle zone\n    if (currentZone.points.length === 1) {\n      const newZone = {\n        ...currentZone,\n        points: [currentZone.points[0], coords],\n        isComplete: true,\n        name: `${zoneTypes[selectedZoneType].name} ${zones.length + 1}`,\n        requiresScooper: zoneTypes[selectedZoneType].requiresScooper\n      };\n      setZones([...zones, newZone]);\n      toast.success(`${zoneTypes[selectedZoneType].name} zone created!`);\n    }\n    setIsDrawing(false);\n    setCurrentZone(null);\n  };\n  const findZoneAtPoint = (x, y) => {\n    return zones.find(zone => {\n      if (zone.points.length === 2) {\n        const [p1, p2] = zone.points;\n        return x >= Math.min(p1.x, p2.x) && x <= Math.max(p1.x, p2.x) && y >= Math.min(p1.y, p2.y) && y <= Math.max(p1.y, p2.y);\n      }\n      return false;\n    });\n  };\n  const drawZones = (zonesToDraw = zones) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    const ctx = canvas.getContext('2d');\n\n    // Get the actual displayed size of the canvas\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n    console.log('🎨 Drawing zones on canvas:', {\n      canvasSize: `${canvas.width}x${canvas.height}`,\n      frameSize: `${frameWidth}x${frameHeight}`,\n      zones: zonesToDraw.length\n    });\n\n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    if (!showZones) return;\n\n    // Draw each zone\n    zonesToDraw.forEach((zone, index) => {\n      if (zone.points.length >= 2) {\n        const zoneConfig = zoneTypes[zone.type];\n        const [p1, p2] = zone.points;\n\n        // Draw filled rectangle\n        ctx.fillStyle = zoneConfig.fillColor;\n        ctx.fillRect(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y), Math.abs(p2.x - p1.x), Math.abs(p2.y - p1.y));\n\n        // Draw border\n        ctx.strokeStyle = zoneConfig.color;\n        ctx.lineWidth = (editingZone === null || editingZone === void 0 ? void 0 : editingZone.id) === zone.id ? 4 : 2;\n        ctx.setLineDash((editingZone === null || editingZone === void 0 ? void 0 : editingZone.id) === zone.id ? [5, 5] : []);\n        ctx.strokeRect(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y), Math.abs(p2.x - p1.x), Math.abs(p2.y - p1.y));\n\n        // Draw label\n        const labelX = Math.min(p1.x, p2.x) + 5;\n        const labelY = Math.min(p1.y, p2.y) + 20;\n        ctx.fillStyle = zoneConfig.color;\n        ctx.font = 'bold 14px Arial';\n        ctx.fillText(`${zoneConfig.icon} ${zone.name}`, labelX, labelY);\n\n        // Draw scooper requirement indicator\n        const reqText = zone.requiresScooper ? '🥄 Required' : '🚫 Not Required';\n        ctx.font = '12px Arial';\n        ctx.fillStyle = zone.requiresScooper ? '#FF4757' : '#2ED573';\n        ctx.fillText(reqText, labelX, labelY + 18);\n      }\n    });\n\n    // Draw current zone being drawn\n    if (currentZone && currentZone.points.length === 2) {\n      const zoneConfig = zoneTypes[currentZone.type];\n      const [p1, p2] = currentZone.points;\n      ctx.strokeStyle = zoneConfig.color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([10, 5]);\n      ctx.strokeRect(Math.min(p1.x, p2.x), Math.min(p1.y, p2.y), Math.abs(p2.x - p1.x), Math.abs(p2.y - p1.y));\n    }\n  };\n  const deleteZone = zoneId => {\n    setZones(zones.filter(zone => zone.id !== zoneId));\n    setEditingZone(null);\n    toast.info('Zone deleted');\n  };\n  const clearAllZones = () => {\n    setZones([]);\n    setEditingZone(null);\n    toast.info('All zones cleared');\n  };\n  const exportZones = () => {\n    const exportData = {\n      zones: zones.map(zone => ({\n        ...zone,\n        // Convert to relative coordinates (0-1)\n        points: zone.points.map(p => ({\n          x: p.x / frameWidth,\n          y: p.y / frameHeight\n        }))\n      })),\n      frameSize: {\n        width: frameWidth,\n        height: frameHeight\n      },\n      exportedAt: new Date().toISOString()\n    };\n    const blob = new Blob([JSON.stringify(exportData, null, 2)], {\n      type: 'application/json'\n    });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `roi_zones_${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n    toast.success('Zones exported successfully!');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '16px',\n        padding: '16px',\n        background: 'rgba(255,255,255,0.1)',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 12px 0',\n          color: '#fff'\n        },\n        children: \"\\uD83C\\uDFAF ROI Zone Manager\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '12px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            display: 'block',\n            marginBottom: '6px',\n            fontWeight: 'bold'\n          },\n          children: \"Zone Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedZoneType,\n          onChange: e => setSelectedZoneType(e.target.value),\n          style: {\n            padding: '8px',\n            borderRadius: '6px',\n            border: '1px solid rgba(255,255,255,0.3)',\n            background: 'rgba(255,255,255,0.1)',\n            color: 'white',\n            width: '200px'\n          },\n          children: Object.entries(zoneTypes).map(([key, config]) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: key,\n            style: {\n              background: '#333',\n              color: 'white'\n            },\n            children: [config.icon, \" \", config.name]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '8px',\n          flexWrap: 'wrap',\n          alignItems: 'center'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => setShowZones(!showZones),\n          children: showZones ? '👁️ Hide Zones' : '👁️‍🗨️ Show Zones'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-warning\",\n          onClick: clearAllZones,\n          disabled: zones.length === 0,\n          children: \"\\uD83D\\uDDD1\\uFE0F Clear All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-success\",\n          onClick: exportZones,\n          disabled: zones.length === 0,\n          children: \"\\uD83D\\uDCE5 Export Zones\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: '16px',\n            fontSize: '14px',\n            opacity: 0.8\n          },\n          children: [\"Zones: \", zones.length, \" | Click and drag to create zones\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'relative',\n        display: 'inline-block',\n        width: '100%',\n        maxWidth: '100%',\n        background: '#000',\n        borderRadius: '8px',\n        overflow: 'hidden'\n      },\n      children: [currentFrame && /*#__PURE__*/_jsxDEV(\"img\", {\n        src: `data:image/jpeg;base64,${currentFrame}`,\n        alt: \"Video frame for zone configuration\",\n        style: {\n          width: '100%',\n          height: 'auto',\n          display: 'block',\n          borderRadius: '8px'\n        },\n        onLoad: () => {\n          console.log('🎯 ROI Manager: Video frame loaded');\n          drawZones();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: canvasRef,\n        style: {\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%',\n          height: '100%',\n          cursor: isEnabled ? 'crosshair' : 'default',\n          pointerEvents: isEnabled ? 'auto' : 'none',\n          zIndex: 20\n        },\n        onMouseDown: handleMouseDown,\n        onMouseMove: handleMouseMove,\n        onMouseUp: handleMouseUp\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 9\n      }, this), !currentFrame && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: '100%',\n          height: '300px',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          background: 'rgba(255,255,255,0.1)',\n          color: 'rgba(255,255,255,0.6)'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            textAlign: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '48px',\n              marginBottom: '16px'\n            },\n            children: \"\\uD83C\\uDFA5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Video frame will appear here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 407,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 352,\n      columnNumber: 7\n    }, this), zones.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '16px',\n        padding: '16px',\n        background: 'rgba(255,255,255,0.05)',\n        borderRadius: '8px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: '0 0 12px 0'\n        },\n        children: [\"\\uD83D\\uDCCB Active Zones (\", zones.length, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxHeight: '200px',\n          overflowY: 'auto'\n        },\n        children: zones.map((zone, index) => {\n          const config = zoneTypes[zone.type];\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              alignItems: 'center',\n              padding: '8px 12px',\n              marginBottom: '8px',\n              background: (editingZone === null || editingZone === void 0 ? void 0 : editingZone.id) === zone.id ? 'rgba(255,255,255,0.2)' : 'rgba(255,255,255,0.1)',\n              borderRadius: '6px',\n              border: `2px solid ${config.color}`\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: [config.icon, \" \", zone.name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 442,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                style: {\n                  opacity: 0.8\n                },\n                children: [config.description, \" | Scooper: \", zone.requiresScooper ? '🥄 Required' : '🚫 Not Required']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => deleteZone(zone.id),\n              style: {\n                background: '#FF4757',\n                border: 'none',\n                borderRadius: '4px',\n                padding: '4px 8px',\n                color: 'white',\n                cursor: 'pointer',\n                fontSize: '12px'\n              },\n              children: \"\\uD83D\\uDDD1\\uFE0F Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this)]\n          }, zone.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s(ROIZoneManager, \"eODZid7TnYHQgTNx3sN1CQJsJVc=\");\n_c = ROIZoneManager;\nexport default ROIZoneManager;\nvar _c;\n$RefreshReg$(_c, \"ROIZoneManager\");","map":{"version":3,"names":["React","useState","useRef","useEffect","toast","jsxDEV","_jsxDEV","ROIZoneManager","currentFrame","onZonesUpdate","existingZones","isEnabled","frameWidth","frameHeight","_s","canvasRef","zones","setZones","isDrawing","setIsDrawing","currentZone","setCurrentZone","selectedZoneType","setSelectedZoneType","editingZone","setEditingZone","showZones","setShowZones","zoneTypes","sauce_area","name","color","fillColor","requiresScooper","icon","description","cheese_area","meat_area","vegetable_area","prep_surface","cleaning_area","drawZones","getCanvasCoordinates","event","canvas","current","rect","getBoundingClientRect","scaleX","width","scaleY","height","x","clientX","left","y","clientY","top","handleMouseDown","coords","clickedZone","findZoneAtPoint","id","Date","now","type","points","isComplete","handleMouseMove","length","updatedZone","handleMouseUp","newZone","success","find","zone","p1","p2","Math","min","max","zonesToDraw","ctx","getContext","console","log","canvasSize","frameSize","clearRect","forEach","index","zoneConfig","fillStyle","fillRect","abs","strokeStyle","lineWidth","setLineDash","strokeRect","labelX","labelY","font","fillText","reqText","deleteZone","zoneId","filter","info","clearAllZones","exportZones","exportData","map","p","exportedAt","toISOString","blob","Blob","JSON","stringify","url","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","style","children","marginBottom","padding","background","borderRadius","margin","fileName","_jsxFileName","lineNumber","columnNumber","display","fontWeight","value","onChange","e","target","border","Object","entries","key","config","gap","flexWrap","alignItems","className","onClick","disabled","marginLeft","fontSize","opacity","position","maxWidth","overflow","src","alt","onLoad","ref","cursor","pointerEvents","zIndex","onMouseDown","onMouseMove","onMouseUp","justifyContent","textAlign","marginTop","maxHeight","overflowY","_c","$RefreshReg$"],"sources":["C:/Users/ayoub/OneDrive/Desktop/eagleAI/pizza_store_detection/services/frontend/src/components/ROIZoneManager.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { toast } from 'react-toastify';\n\nconst ROIZoneManager = ({ \n  currentFrame, \n  onZonesUpdate, \n  existingZones = [], \n  isEnabled = true,\n  frameWidth = 640,\n  frameHeight = 480 \n}) => {\n  const canvasRef = useRef(null);\n  const [zones, setZones] = useState(existingZones);\n  const [isDrawing, setIsDrawing] = useState(false);\n  const [currentZone, setCurrentZone] = useState(null);\n  const [selectedZoneType, setSelectedZoneType] = useState('sauce_area');\n  const [editingZone, setEditingZone] = useState(null);\n  const [showZones, setShowZones] = useState(true);\n\n  // Zone types with professional configuration\n  const zoneTypes = {\n    sauce_area: {\n      name: 'Sauce Area',\n      color: '#FF6B35',\n      fillColor: 'rgba(255, 107, 53, 0.2)',\n      requiresScooper: true,\n      icon: '🍅',\n      description: 'Sauce dispensing and handling area'\n    },\n    cheese_area: {\n      name: 'Cheese Area', \n      color: '#FFD23F',\n      fillColor: 'rgba(255, 210, 63, 0.2)',\n      requiresScooper: true,\n      icon: '🧀',\n      description: 'Cheese container and handling area'\n    },\n    meat_area: {\n      name: 'Meat/Protein Area',\n      color: '#FF4757',\n      fillColor: 'rgba(255, 71, 87, 0.2)',\n      requiresScooper: true,\n      icon: '🥓',\n      description: 'Meat and protein ingredient area'\n    },\n    vegetable_area: {\n      name: 'Vegetable Area',\n      color: '#2ED573',\n      fillColor: 'rgba(46, 213, 115, 0.2)',\n      requiresScooper: true,\n      icon: '🥬',\n      description: 'Vegetable and fresh ingredient area'\n    },\n    prep_surface: {\n      name: 'Prep Surface',\n      color: '#5352ED',\n      fillColor: 'rgba(83, 82, 237, 0.2)',\n      requiresScooper: false,\n      icon: '🍕',\n      description: 'Pizza preparation surface (no scooper required)'\n    },\n    cleaning_area: {\n      name: 'Cleaning Area',\n      color: '#00D2D3',\n      fillColor: 'rgba(0, 210, 211, 0.2)',\n      requiresScooper: false,\n      icon: '🧽',\n      description: 'Cleaning and sanitization area'\n    }\n  };\n\n  useEffect(() => {\n    if (onZonesUpdate) {\n      onZonesUpdate(zones);\n    }\n  }, [zones, onZonesUpdate]);\n\n  useEffect(() => {\n    drawZones();\n  }, [zones, currentFrame, showZones, frameWidth, frameHeight]);\n\n  const getCanvasCoordinates = (event) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n    \n    return {\n      x: (event.clientX - rect.left) * scaleX,\n      y: (event.clientY - rect.top) * scaleY\n    };\n  };\n\n  const handleMouseDown = (event) => {\n    if (!isEnabled) return;\n    \n    const coords = getCanvasCoordinates(event);\n    \n    // Check if clicking on existing zone for editing\n    const clickedZone = findZoneAtPoint(coords.x, coords.y);\n    if (clickedZone) {\n      setEditingZone(clickedZone);\n      return;\n    }\n\n    // Start drawing new zone\n    setIsDrawing(true);\n    setCurrentZone({\n      id: `zone_${Date.now()}`,\n      type: selectedZoneType,\n      points: [coords],\n      isComplete: false\n    });\n  };\n\n  const handleMouseMove = (event) => {\n    if (!isDrawing || !currentZone) return;\n    \n    const coords = getCanvasCoordinates(event);\n    \n    // Update current zone with new point for rectangle drawing\n    if (currentZone.points.length === 1) {\n      const updatedZone = {\n        ...currentZone,\n        points: [currentZone.points[0], coords]\n      };\n      setCurrentZone(updatedZone);\n      drawZones([...zones, updatedZone]);\n    }\n  };\n\n  const handleMouseUp = (event) => {\n    if (!isDrawing || !currentZone) return;\n    \n    const coords = getCanvasCoordinates(event);\n    \n    // Complete rectangle zone\n    if (currentZone.points.length === 1) {\n      const newZone = {\n        ...currentZone,\n        points: [currentZone.points[0], coords],\n        isComplete: true,\n        name: `${zoneTypes[selectedZoneType].name} ${zones.length + 1}`,\n        requiresScooper: zoneTypes[selectedZoneType].requiresScooper\n      };\n      \n      setZones([...zones, newZone]);\n      toast.success(`${zoneTypes[selectedZoneType].name} zone created!`);\n    }\n    \n    setIsDrawing(false);\n    setCurrentZone(null);\n  };\n\n  const findZoneAtPoint = (x, y) => {\n    return zones.find(zone => {\n      if (zone.points.length === 2) {\n        const [p1, p2] = zone.points;\n        return x >= Math.min(p1.x, p2.x) && x <= Math.max(p1.x, p2.x) &&\n               y >= Math.min(p1.y, p2.y) && y <= Math.max(p1.y, p2.y);\n      }\n      return false;\n    });\n  };\n\n  const drawZones = (zonesToDraw = zones) => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n\n    // Get the actual displayed size of the canvas\n    const rect = canvas.getBoundingClientRect();\n    canvas.width = rect.width;\n    canvas.height = rect.height;\n\n    console.log('🎨 Drawing zones on canvas:', {\n      canvasSize: `${canvas.width}x${canvas.height}`,\n      frameSize: `${frameWidth}x${frameHeight}`,\n      zones: zonesToDraw.length\n    });\n    \n    // Clear canvas\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    \n    if (!showZones) return;\n\n    // Draw each zone\n    zonesToDraw.forEach((zone, index) => {\n      if (zone.points.length >= 2) {\n        const zoneConfig = zoneTypes[zone.type];\n        const [p1, p2] = zone.points;\n        \n        // Draw filled rectangle\n        ctx.fillStyle = zoneConfig.fillColor;\n        ctx.fillRect(\n          Math.min(p1.x, p2.x),\n          Math.min(p1.y, p2.y),\n          Math.abs(p2.x - p1.x),\n          Math.abs(p2.y - p1.y)\n        );\n        \n        // Draw border\n        ctx.strokeStyle = zoneConfig.color;\n        ctx.lineWidth = editingZone?.id === zone.id ? 4 : 2;\n        ctx.setLineDash(editingZone?.id === zone.id ? [5, 5] : []);\n        ctx.strokeRect(\n          Math.min(p1.x, p2.x),\n          Math.min(p1.y, p2.y),\n          Math.abs(p2.x - p1.x),\n          Math.abs(p2.y - p1.y)\n        );\n        \n        // Draw label\n        const labelX = Math.min(p1.x, p2.x) + 5;\n        const labelY = Math.min(p1.y, p2.y) + 20;\n        \n        ctx.fillStyle = zoneConfig.color;\n        ctx.font = 'bold 14px Arial';\n        ctx.fillText(`${zoneConfig.icon} ${zone.name}`, labelX, labelY);\n        \n        // Draw scooper requirement indicator\n        const reqText = zone.requiresScooper ? '🥄 Required' : '🚫 Not Required';\n        ctx.font = '12px Arial';\n        ctx.fillStyle = zone.requiresScooper ? '#FF4757' : '#2ED573';\n        ctx.fillText(reqText, labelX, labelY + 18);\n      }\n    });\n    \n    // Draw current zone being drawn\n    if (currentZone && currentZone.points.length === 2) {\n      const zoneConfig = zoneTypes[currentZone.type];\n      const [p1, p2] = currentZone.points;\n      \n      ctx.strokeStyle = zoneConfig.color;\n      ctx.lineWidth = 3;\n      ctx.setLineDash([10, 5]);\n      ctx.strokeRect(\n        Math.min(p1.x, p2.x),\n        Math.min(p1.y, p2.y),\n        Math.abs(p2.x - p1.x),\n        Math.abs(p2.y - p1.y)\n      );\n    }\n  };\n\n  const deleteZone = (zoneId) => {\n    setZones(zones.filter(zone => zone.id !== zoneId));\n    setEditingZone(null);\n    toast.info('Zone deleted');\n  };\n\n  const clearAllZones = () => {\n    setZones([]);\n    setEditingZone(null);\n    toast.info('All zones cleared');\n  };\n\n  const exportZones = () => {\n    const exportData = {\n      zones: zones.map(zone => ({\n        ...zone,\n        // Convert to relative coordinates (0-1)\n        points: zone.points.map(p => ({\n          x: p.x / frameWidth,\n          y: p.y / frameHeight\n        }))\n      })),\n      frameSize: { width: frameWidth, height: frameHeight },\n      exportedAt: new Date().toISOString()\n    };\n    \n    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `roi_zones_${Date.now()}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n    \n    toast.success('Zones exported successfully!');\n  };\n\n  return (\n    <div style={{ width: '100%' }}>\n      {/* Zone Controls */}\n      <div style={{ \n        marginBottom: '16px', \n        padding: '16px', \n        background: 'rgba(255,255,255,0.1)', \n        borderRadius: '8px' \n      }}>\n        <h4 style={{ margin: '0 0 12px 0', color: '#fff' }}>🎯 ROI Zone Manager</h4>\n        \n        {/* Zone Type Selector */}\n        <div style={{ marginBottom: '12px' }}>\n          <label style={{ display: 'block', marginBottom: '6px', fontWeight: 'bold' }}>\n            Zone Type:\n          </label>\n          <select\n            value={selectedZoneType}\n            onChange={(e) => setSelectedZoneType(e.target.value)}\n            style={{\n              padding: '8px',\n              borderRadius: '6px',\n              border: '1px solid rgba(255,255,255,0.3)',\n              background: 'rgba(255,255,255,0.1)',\n              color: 'white',\n              width: '200px'\n            }}\n          >\n            {Object.entries(zoneTypes).map(([key, config]) => (\n              <option key={key} value={key} style={{ background: '#333', color: 'white' }}>\n                {config.icon} {config.name}\n              </option>\n            ))}\n          </select>\n        </div>\n        \n        {/* Controls */}\n        <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap', alignItems: 'center' }}>\n          <button\n            className=\"btn btn-primary\"\n            onClick={() => setShowZones(!showZones)}\n          >\n            {showZones ? '👁️ Hide Zones' : '👁️‍🗨️ Show Zones'}\n          </button>\n          \n          <button\n            className=\"btn btn-warning\"\n            onClick={clearAllZones}\n            disabled={zones.length === 0}\n          >\n            🗑️ Clear All\n          </button>\n          \n          <button\n            className=\"btn btn-success\"\n            onClick={exportZones}\n            disabled={zones.length === 0}\n          >\n            📥 Export Zones\n          </button>\n          \n          <span style={{ marginLeft: '16px', fontSize: '14px', opacity: 0.8 }}>\n            Zones: {zones.length} | Click and drag to create zones\n          </span>\n        </div>\n      </div>\n\n      {/* Video with zone drawing overlay */}\n      <div style={{\n        position: 'relative',\n        display: 'inline-block',\n        width: '100%',\n        maxWidth: '100%',\n        background: '#000',\n        borderRadius: '8px',\n        overflow: 'hidden'\n      }}>\n        {/* Background video frame */}\n        {currentFrame && (\n          <img\n            src={`data:image/jpeg;base64,${currentFrame}`}\n            alt=\"Video frame for zone configuration\"\n            style={{\n              width: '100%',\n              height: 'auto',\n              display: 'block',\n              borderRadius: '8px'\n            }}\n            onLoad={() => {\n              console.log('🎯 ROI Manager: Video frame loaded');\n              drawZones();\n            }}\n          />\n        )}\n\n        {/* Zone drawing canvas overlay */}\n        <canvas\n          ref={canvasRef}\n          style={{\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            width: '100%',\n            height: '100%',\n            cursor: isEnabled ? 'crosshair' : 'default',\n            pointerEvents: isEnabled ? 'auto' : 'none',\n            zIndex: 20\n          }}\n          onMouseDown={handleMouseDown}\n          onMouseMove={handleMouseMove}\n          onMouseUp={handleMouseUp}\n        />\n\n        {!currentFrame && (\n          <div style={{\n            width: '100%',\n            height: '300px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            background: 'rgba(255,255,255,0.1)',\n            color: 'rgba(255,255,255,0.6)'\n          }}>\n            <div style={{ textAlign: 'center' }}>\n              <div style={{ fontSize: '48px', marginBottom: '16px' }}>🎥</div>\n              <p>Video frame will appear here</p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Zone List */}\n      {zones.length > 0 && (\n        <div style={{ \n          marginTop: '16px', \n          padding: '16px', \n          background: 'rgba(255,255,255,0.05)', \n          borderRadius: '8px' \n        }}>\n          <h4 style={{ margin: '0 0 12px 0' }}>📋 Active Zones ({zones.length})</h4>\n          <div style={{ maxHeight: '200px', overflowY: 'auto' }}>\n            {zones.map((zone, index) => {\n              const config = zoneTypes[zone.type];\n              return (\n                <div\n                  key={zone.id}\n                  style={{\n                    display: 'flex',\n                    justifyContent: 'space-between',\n                    alignItems: 'center',\n                    padding: '8px 12px',\n                    marginBottom: '8px',\n                    background: editingZone?.id === zone.id ? 'rgba(255,255,255,0.2)' : 'rgba(255,255,255,0.1)',\n                    borderRadius: '6px',\n                    border: `2px solid ${config.color}`\n                  }}\n                >\n                  <div>\n                    <strong>{config.icon} {zone.name}</strong>\n                    <br />\n                    <small style={{ opacity: 0.8 }}>\n                      {config.description} | Scooper: {zone.requiresScooper ? '🥄 Required' : '🚫 Not Required'}\n                    </small>\n                  </div>\n                  <button\n                    onClick={() => deleteZone(zone.id)}\n                    style={{\n                      background: '#FF4757',\n                      border: 'none',\n                      borderRadius: '4px',\n                      padding: '4px 8px',\n                      color: 'white',\n                      cursor: 'pointer',\n                      fontSize: '12px'\n                    }}\n                  >\n                    🗑️ Delete\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ROIZoneManager;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}